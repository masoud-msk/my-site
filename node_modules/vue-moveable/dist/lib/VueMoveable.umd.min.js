(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["VueMoveable"]=e():t["VueMoveable"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="fb15")}({8875:function(t,e,r){var n,i,o;(function(r,a){i=[],n=a,o="function"===typeof n?n.apply(e,i):n,void 0===o||(t.exports=o)})("undefined"!==typeof self&&self,(function(){function t(){if(document.currentScript)return document.currentScript;try{throw new Error}catch(l){var t,e,r,n=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,i=/@([^@]*):(\d+):(\d+)\s*$/gi,o=n.exec(l.stack)||i.exec(l.stack),a=o&&o[1]||!1,s=o&&o[2]||!1,u=document.location.href.replace(document.location.hash,""),c=document.getElementsByTagName("script");a===u&&(t=document.documentElement.outerHTML,e=new RegExp("(?:[^\\n]+?\\n){0,"+(s-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),r=t.replace(e,"$1").trim());for(var f=0;f<c.length;f++){if("interactive"===c[f].readyState)return c[f];if(c[f].src===a)return c[f];if(a===u&&c[f].innerHTML&&c[f].innerHTML.trim()===r)return c[f]}return null}}return t}))},fb15:function(t,e,r){"use strict";if(r.r(e),"undefined"!==typeof window){var n=window.document.currentScript,i=r("8875");n=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var o=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(r.p=o[1])}var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._t("default")],2)},s=[];function u(t){return"undefined"===typeof t}var c=function(){var t=function(){function t(){this._eventHandler={},this.options={}}var e=t.prototype;return e.trigger=function(t,e){void 0===e&&(e={});var r=this._eventHandler[t]||[],n=r.length>0;if(!n)return!0;r=r.concat(),e.eventType=t;var i=!1,o=[e],a=0;e.stop=function(){i=!0},e.currentTarget=this;for(var s=arguments.length,u=new Array(s>2?s-2:0),c=2;c<s;c++)u[c-2]=arguments[c];for(u.length>=1&&(o=o.concat(u)),a=0;r[a];a++)r[a].apply(this,o);return!i},e.once=function(t,e){if("object"===typeof t&&u(e)){var r,n=t;for(r in n)this.once(r,n[r]);return this}if("string"===typeof t&&"function"===typeof e){var i=this;this.on(t,(function r(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];e.apply(i,o),i.off(t,r)}))}return this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"===typeof t&&u(e)){var r,n=t;for(r in n)this.on(r,n[r]);return this}if("string"===typeof t&&"function"===typeof e){var i=this._eventHandler[t];u(i)&&(this._eventHandler[t]=[],i=this._eventHandler[t]),i.push(e)}return this},e.off=function(t,e){if(u(t))return this._eventHandler={},this;if(u(e)){if("string"===typeof t)return this._eventHandler[t]=void 0,this;var r,n=t;for(r in n)this.off(r,n[r]);return this}var i,o,a=this._eventHandler[t];if(a)for(i=0;void 0!==(o=a[i]);i++)if(o===e){a=a.splice(i,1);break}return this},t}();return t.VERSION="2.1.2",t}(),f=c;function l(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.map((function(e){return e.split(" ").map((function(e){return e?""+t+e:""})).join(" ")})).join(" ")}function p(t,e){return e.replace(/([^}{]*){/gm,(function(e,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"}))}function h(t,e){return function(r){r&&(t[e]=r)}}function d(t,e,r){return function(n){n&&(t[e][r]=n)}}function v(t,e){return function(r){var n=r.prototype;t.forEach((function(t){e(n,t)}))}}var g=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var r=this.keys,n=this.values,i=r.indexOf(t),o=-1===i?r.length:i;r[o]=t,n[o]=e},t}(),m=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),b="function"===typeof Map,y=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){var t=this,e=-1;while(t)t=t.prev,++e;return e},t}();function x(t,e){var r=[],n=[];return t.forEach((function(t){var e=t[0],i=t[1],o=new y;r[e]=o,n[i]=o})),r.forEach((function(t,e){t.connect(r[e-1])})),t.filter((function(t,r){return!e[r]})).map((function(t,e){var i=t[0],o=t[1];if(i===o)return[0,0];var a=r[i],s=n[o-1],u=a.getIndex();a.disconnect(),s?a.connect(s,s.next):a.connect(void 0,r[0]);var c=a.getIndex();return[u,c]}))}var E=function(){function t(t,e,r,n,i,o,a,s){this.prevList=t,this.list=e,this.added=r,this.removed=n,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=x(this.changedBeforeAdded,this.fixed),e=this.changed,r=[];this.cacheOrdered=t.filter((function(t,n){var i=t[0],o=t[1],a=e[n],s=a[0],u=a[1];if(i!==o)return r.push([s,u]),!0})),this.cachePureChanged=r},t}();function S(t,e,r){var n=b?Map:r?m:g,i=r||function(t){return t},o=[],a=[],s=[],u=t.map(i),c=e.map(i),f=new n,l=new n,p=[],h=[],d={},v=[],y=0,x=0;return u.forEach((function(t,e){f.set(t,e)})),c.forEach((function(t,e){l.set(t,e)})),u.forEach((function(t,e){var r=l.get(t);"undefined"===typeof r?(++x,a.push(e)):d[r]=x})),c.forEach((function(t,e){var r=f.get(t);"undefined"===typeof r?(o.push(e),++y):(s.push([r,e]),x=d[e]||0,p.push([r-x,e-y]),h.push(e===r),r!==e&&v.push([r,e]))})),a.reverse(),new E(t,e,o,a,v,s,p,h)}var M=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}var e=t.prototype;return e.update=function(t){var e=[].slice.call(t),r=S(this.list,e,this.findKeyCallback);return this.list=e,r},t}(),w=M,D="function",C="object",O="string",P="undefined",R=(typeof document!==P&&document,['"',"'",'\\"',"\\'"]);function z(t,e,r,n){return(t*n+e*r)/(r+n)}function B(t){return typeof t===P}function _(t){return t&&typeof t===C}function G(t){return Array.isArray(t)}function T(t){return typeof t===O}function A(t){return typeof t===D}function j(t,e,r,n){for(var i=r;i<n;++i){var o=e[i].trim();if(o===t)return i;var a=i;if("("===o?a=j(")",e,i+1,n):R.indexOf(o)>-1&&(a=j(o,e,i+1,n)),-1===a)break;i=a}return-1}function N(t,e){for(var r="(\\s*"+(e||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)",n=new RegExp(r,"g"),i=t.split(n).filter(Boolean),o=i.length,a=[],s=[],u=0;u<o;++u){var c=i[u].trim(),f=u;if("("===c)f=j(")",i,u+1,o);else{if(")"===c)throw new Error("invalid format");if(R.indexOf(c)>-1)f=j(c,i,u+1,o);else if(c===e){s.length&&(a.push(s.join("")),s=[]);continue}}-1===f&&(f=o-1),s.push(i.slice(u,f+1).join("")),u=f}return s.length&&a.push(s.join("")),a}function I(t){return N(t,",")}function k(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function X(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var r=e[1],n=e[2],i=e[3];return{prefix:r,unit:i,value:parseFloat(n)}}function Y(t){return t.replace(/[\s-_]([a-z])/g,(function(t,e){return e.toUpperCase()}))}function W(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,(function(t,r,n){return""+r+e+n.toLowerCase()}))}function q(){return Date.now?Date.now():(new Date).getTime()}function H(t,e,r){void 0===r&&(r=-1);for(var n=t.length,i=0;i<n;++i)if(e(t[i],i,t))return i;return r}function L(t,e,r){var n=H(t,e);return n>-1?t[n]:r}function F(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function V(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function U(t,e){if(t.classList)t.classList.remove(e);else{var r=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(r," ")}}function $(t,e,r,n){t.addEventListener(e,r,n)}function K(t,e,r){t.removeEventListener(e,r)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Z=function(t,e){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Z(t,e)};function J(t,e){function r(){this.constructor=t}Z(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Q=function(){return Q=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Q.apply(this,arguments)};function tt(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function et(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function rt(t,e){if(t===e)return!1;for(var r in t)if(!(r in e))return!0;for(var r in e)if(t[r]!==e[r])return!0;return!1}function nt(t,e){var r=Object.keys(t),n=Object.keys(e),i=S(r,n,(function(t){return t})),o={},a={},s={};return i.added.forEach((function(t){var r=n[t];o[r]=e[r]})),i.removed.forEach((function(e){var n=r[e];a[n]=t[n]})),i.maintained.forEach((function(n){var i=n[0],o=r[i],a=[t[o],e[o]];t[o]!==e[o]&&(s[o]=a)})),{added:o,removed:a,changed:s}}function it(t){t.forEach((function(t){t()}))}function ot(t){var e=0;return t.map((function(t){return null==t?"$compat"+ ++e:""+t}))}function at(t,e,r,n){if(T(t))return new gt("text_"+t,e,r,n,null,{});var i="string"===typeof t.type?mt:t.type.prototype.render?St:xt;return new i(t.type,e,r,n,t.ref,t.props)}function st(t){var e=[];return t.forEach((function(t){e=e.concat(G(t)?st(t):t)})),e}function ut(t){var e=t.className,r=tt(t,["className"]);return null!=e&&(r.class=e),delete r.style,delete r.children,r}function ct(t,e){if(!e)return t;for(var r in e)B(t[r])&&(t[r]=e[r]);return t}function ft(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=e||{},o=i.key,a=i.ref,s=tt(i,["key","ref"]);return{type:t,key:o,ref:a,props:Q(Q({},s),{children:st(r).filter((function(t){return null!=t&&!1!==t}))})}}var lt=function(){function t(t,e,r,n,i,o){void 0===o&&(o={}),this.type=t,this.key=e,this.index=r,this.container=n,this.ref=i,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,r,n){if(this.base&&!T(e)&&!n&&!this._should(e.props,r))return!1;this.original=e,this._setState(r);var i=this.props;return T(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?i:{},r),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function pt(t,e,r){var n=nt(t,e),i=n.added,o=n.removed,a=n.changed;for(var s in i)r.setAttribute(s,i[s]);for(var s in a)r.setAttribute(s,a[s][1]);for(var s in o)r.removeAttribute(s)}function ht(t,e,r){var n=nt(t,e),i=n.added,o=n.removed,a=n.changed;for(var s in o)r.removeEventListener(s);for(var s in i)r.addEventListener(s,i[s]);for(var s in a)r.removeEventListener(s),r.addEventListener(s,a[s][1]);for(var s in o)r.removeEventListener(s)}function dt(t,e,r){var n=r.style,i=nt(t,e),o=i.added,a=i.removed,s=i.changed;for(var u in o){var c=W(u,"-");n.setProperty?n.setProperty(c,o[u]):n[c]=o[u]}for(var u in s){c=W(u,"-");n.setProperty?n.setProperty(c,s[u][1]):n[c]=s[u][1]}for(var u in a){c=W(u,"-");n.removeProperty?n.removeProperty(c):n[c]=""}}function vt(t){var e={},r={};for(var n in t)0===n.indexOf("on")?r[n.replace("on","").toLowerCase()]=t[n]:e[n]=t[n];return{attributes:e,events:r}}var gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}J(e,t);var r=e.prototype;return r._render=function(t){var e=this,r=!this.base;return r&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push((function(){r?e._mounted():e._updated()})),!0},r._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(lt),mt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events={},e}J(e,t);var r=e.prototype;return r.addEventListener=function(t,e){var r=this.events;r[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,r[t])},r.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},r._should=function(t){return rt(this.props,t)},r._render=function(t,e){var r=this,n=!this.base;n&&(this.base=document.createElement(this.type)),Rt(this,this._providers,this.props.children,t,null);var i=this.base,o=vt(e),a=o.attributes,s=o.events,u=vt(this.props),c=u.attributes,f=u.events;return pt(ut(a),ut(c),i),ht(s,f,this),dt(e.style||{},this.props.style||{},i),t.push((function(){n?r._mounted():r._updated()})),!0},r._unmount=function(){var t=this.events,e=this.base;for(var r in t)e.removeEventListener(r,t[r]);this._providers.forEach((function(t){t._unmount()})),this.events={},e.parentNode.removeChild(e)},e}(lt);function bt(t){if(!t)return null;var e=t.base;return e instanceof Node?e:bt(t.container)}function yt(t){if(!t)return null;if(t instanceof Node)return t;var e=t._provider._providers;return e.length?yt(e[0].base):null}var xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}J(e,t);var r=e.prototype;return r._render=function(t){var e=this.type(this.props);return Rt(this,this._providers,e?[e]:[],t),!0},r._unmount=function(){this._providers.forEach((function(t){t._unmount()}))},e}(lt),Et=function(t){function e(e){var r=t.call(this,"container","container",0,null)||this;return r.base=e,r}J(e,t);var r=e.prototype;return r._render=function(){return!0},r._unmount=function(){},e}(lt),St=function(t){function e(e,r,n,i,o,a){return void 0===a&&(a={}),t.call(this,e,r,n,i,o,ct(a,e.defaultProps))||this}J(e,t);var r=e.prototype;return r._should=function(t,e){return this.base.shouldComponentUpdate(ct(t,this.type.defaultProps),e||this.base.state)},r._render=function(t,e,r){var n=this;this.props=ct(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),Rt(this,this._providers,s?[s]:[],t,r,null),t.push((function(){i?(n._mounted(),o.componentDidMount()):(n._updated(),o.componentDidUpdate(e,a))}))},r._setState=function(t){if(t){var e=this.base;e.state=t}},r._unmount=function(){this._providers.forEach((function(t){t._unmount()})),this.base.componentWillUnmount()},e}(lt),Mt=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,r){var n=[],i=this._provider,o=Rt(i.container,[i],[i.original],n,Q(Q({},this.state),t),r);o&&(e&&n.push(e),it(n))},e.forceUpdate=function(t){this.setState(this.state,t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},t}(),wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}J(e,t);var r=e.prototype;return r.shouldComponentUpdate=function(t,e){return rt(this.props,t)||rt(this.state,e)},e}(Mt),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}J(e,t);var r=e.prototype;return r.componentDidMount=function(){var t=this.props,e=t.element,r=t.container;this._portalProvider=new Et(r),zt(e,r,this._portalProvider)},r.componentDidUpdate=function(){var t=this.props,e=t.element,r=t.container;zt(e,r,this._portalProvider)},r.componentWillUnmount=function(){var t=this.props.container;zt(null,t,this._portalProvider),this._portalProvider=null},e}(wt);function Ct(t,e,r){var n=[];Rt(t,t._providers,e,n,r),it(n)}function Ot(t,e){for(var r=t._providers,n=r.length,i=e.index+1;i<n;++i){var o=yt(r[i].base);if(o)return o}return null}function Pt(t,e,r){var n=r.map((function(t){return T(t)?null:t.key})),i=ot(e.map((function(t){return t.key}))),o=ot(n),a=S(i,o,(function(t){return t}));a.removed.forEach((function(t){e.splice(t,1)[0]._unmount()})),a.ordered.forEach((function(t){var r=t[0],n=t[1],i=e.splice(r,1)[0];e.splice(n,0,i);var o=yt(i.base),a=yt(e[n+1]&&e[n+1].base);o&&o.parentNode.insertBefore(o,a)})),a.added.forEach((function(i){e.splice(i,0,at(r[i],n[i],i,t))}));var s=a.maintained.filter((function(i){i[0];var o=i[1],a=r[o],s=e[o],u=T(a)?"text_"+a:a.type;return u!==s.type?(s._unmount(),e.splice(o,1,at(a,n[o],o,t)),!0):(s.index=o,!1)}));return et(a.added,s.map((function(t){t[0];var e=t[1];return e})))}function Rt(t,e,r,n,i,o){var a=Pt(t,e,r),s=e.filter((function(t,e){return t._update(n,r[e],i,o)})),u=bt(t);return u&&a.reverse().forEach((function(r){var n=e[r],i=yt(n.base);if(i&&u!==i&&!i.parentNode){var o=Ot(t,n);u.insertBefore(i,o)}})),s.length>0}function zt(t,e,r){void 0===r&&(r=e.__REACT_COMPAT__);var n=!!r;return r||(r=new Et(e)),Ct(r,t?[t]:[]),n||(e.__REACT_COMPAT__=r),r}function Bt(t,e,r){var n=e.__REACT_COMPAT__;t&&!n&&(e.innerHTML=""),zt(t,e,n),r&&r()}function _t(t,e){return ft(Dt,{element:t,container:e})}var Gt="undefined"!==typeof window&&window||{},Tt=(Gt.RegExp,Gt.navigator),At={browser:[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Whale/,identity:"Whale",versionSearch:"Whale"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/MiuiBrowser/,identity:"MIUI Browser",versionSearch:"MiuiBrowser"},{criteria:/SamsungBrowser/,identity:"Samsung Internet",versionSearch:"SamsungBrowser"},{criteria:/SAMSUNG /,identity:"Samsung Internet",versionSearch:"Version"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"Android Browser",versionSearch:"Version"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],os:[{criteria:/Windows Phone/,identity:"Windows Phone",versionSearch:"Windows Phone"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/Windows NT/,identity:"Window",versionSearch:"Windows NT"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"},{criteria:/Tizen/,identity:"Tizen"},{criteria:/Web0S/,identity:"WebOS"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:"-1",name:"unknown"},os:{version:"-1",name:"unknown"}}};function jt(t,e){for(var r=[],n=0;n<t.length;n++)e(t[n])&&r.push(t[n]);return r}function Nt(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return!0;return!1}var It=void 0;function kt(t){It=t}function Xt(t,e){return e&&e.test?!!e.test(t):t.indexOf(e)>-1}function Yt(t,e){var r=jt(t,(function(t){return Xt(It,t.criteria)}))[0];return r&&r.identity||e.name}function Wt(t,e){return jt(t,(function(t){var r=t.criteria,n=new RegExp(t.identity,"i").test(e);return!!(r?n&&Xt(It,r):n)}))[0]}function qt(){return Yt(At.browser,At.defaultString.browser)}function Ht(t){var e=Wt(At.browser,t);return e||(e={criteria:t,versionSearch:t,identity:t}),e}function Lt(t,e){var r=At.defaultString.browser.version,n=new RegExp("("+t+")","i").exec(e);if(!n)return r;var i=n.index,o=n[0];if(i>-1){var a=i+o.length+1;r=e.substring(a).split(" ")[0].replace(/_/g,".").replace(/;|\)/g,"")}return r}function Ft(t){if(t){var e=Ht(t),r=e.versionSearch||t,n=Lt(r,It);return n}}function Vt(){var t=At.webview,e=void 0;return Nt(jt(t,(function(t){return Xt(It,t.criteria)})),(function(t){return e=Lt(t.browserVersionSearch,It),!(!Xt(It,t.webviewToken)&&!Xt(e,t.webviewBrowserVersion))}))}function Ut(t){return Wt(At.os,t)}function $t(){return Yt(At.os,At.defaultString.os)}function Kt(t){var e=Ut(t)||{},r=At.defaultString.os.version,n=void 0;if(t){if(e.versionAlias)return e.versionAlias;var i=e.versionSearch||t,o=new RegExp("("+i+")\\s([\\d_\\.]+|\\d_0)","i"),a=o.exec(It);return a&&(n=o.exec(It)[2].replace(/_/g,".").replace(/;|\)/g,"")),n||r}}function Zt(){var t=$t(),e=Kt(t);return{name:t,version:e}}function Jt(){var t=qt(),e=Ft(t);return{name:t,version:e,webview:Vt()}}function Qt(){return-1!==It.indexOf("Mobi")}function te(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt.userAgent;kt(t);var e={os:Zt(),browser:Jt(),isMobile:Qt()};return e.browser.name=e.browser.name.toLowerCase(),e.os.name=e.os.name.toLowerCase(),e.os.version=e.os.version.toLowerCase(),"ios"===e.os.name&&e.browser.webview&&(e.browser.version="-1"),e}te.VERSION="2.1.5";var ee=te;function re(t,e,r,n,i,o){for(var a=r;a<n;++a)t[a]+=t[i+a-r]*o,e[a]+=e[i+a-r]*o}function ne(t,e,r,n,i){for(var o=r;o<n;++o){var a=t[o],s=e[o];t[o]=t[i+o-r],t[i+o-r]=a,e[o]=e[i+o-r],e[i+o-r]=s}}function ie(t,e,r,n,i){for(var o=r;o<n;++o)t[o]/=i,e[o]/=i}function oe(t,e,r){void 0===r&&(r=Math.sqrt(t.length));for(var n=t.slice(),i=0;i<r;++i)n[i*r+e-1]=0,n[(e-1)*r+i]=0;return n[(e-1)*(r+1)]=1,n}function ae(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=t.slice(),n=Me(e),i=0;i<e;++i){var o=e*i,a=e*(i+1),s=o+i;if(0===r[s])for(var u=i+1;u<e;++u)if(r[e*u+i]){ne(r,n,o,a,e*u);break}if(!r[s])return[];ie(r,n,o,a,r[s]);for(u=0;u<e;++u){var c=e*u,f=c+e,l=c+i,p=r[l];0!==p&&i!==u&&re(r,n,c,f,o,-p)}}return n}function se(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],n=0;n<e;++n)for(var i=0;i<e;++i)r[i*e+n]=t[e*n+i];return r}function ue(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=Math.atan2(n,r);return i>=0?i:i+2*Math.PI}function ce(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],n=0;n<e-1;++n)r[n]=t[(n+1)*e-1];return r[e-1]=0,r}function fe(t,e){for(var r=t.slice(),n=t.length;n<e-1;++n)r[n]=0;return r[e-1]=1,r}function le(t,e,r){if(void 0===e&&(e=Math.sqrt(t.length)),e===r)return t;for(var n=Me(r),i=Math.min(e,r),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)n[o*r+a]=t[o*e+a];n[(o+1)*r-1]=t[(o+1)*e-1],n[(r-1)*r+o]=t[(e-1)*e+o]}return n[r*r-1]=t[e*e-1],n}function pe(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Me(t);return e.forEach((function(e){n=he(n,e,t)})),n}function he(t,e,r){var n=[],i=t.length/r,o=e.length/i;if(!i)return e;if(!o)return t;for(var a=0;a<r;++a)for(var s=0;s<o;++s){n[a*o+s]=0;for(var u=0;u<i;++u)n[a*o+s]+=t[a*i+u]*e[u*o+s]}return n}function de(t,e,r){void 0===r&&(r=Math.sqrt(t.length));for(var n=[],i=t.length/r,o=e.length/i,a=0;a<r;++a)for(var s=0;s<o;++s){n[a+s*o]=0;for(var u=0;u<i;++u)n[a+s*o]+=t[a+u*i]*e[u+s*o]}return n}function ve(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length,n=0,i=r-1;i>=0;--i)n+=t[i];return r?n/r:0}function ge(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]+e[i];return n}function me(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]-e[i];return n}function be(t,e,r){void 0===r&&(r=e.length);var n=he(t,e,r),i=n[r-1];return n.map((function(t){return t/i}))}function ye(t,e){return be(Se(e,3),fe(t,3))}function xe(t){return 6===t.length?[t[0],t[2],t[4],t[1],t[3],t[5],0,0,1]:se(t)}function Ee(t){return 9===t.length?[t[0],t[3],t[1],t[4],t[2],t[5]]:se(t)}function Se(t,e){var r=Math.cos(t),n=Math.sin(t),i=Me(e);return i[0]=r,i[1]=-n,i[e]=n,i[e+1]=r,i}function Me(t){for(var e=t*t,r=[],n=0;n<e;++n)r[n]=n%(t+1)?0:1;return r}function we(t,e){for(var r=Me(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[(e+1)*i]=t[i];return r}function De(t,e){for(var r=Me(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[e*(i+1)-1]=t[i];return r}function Ce(t,e,r,n,i,o,a,s){var u=t[0],c=t[1],f=e[0],l=e[1],p=r[0],h=r[1],d=n[0],v=n[1],g=i[0],m=i[1],b=o[0],y=o[1],x=a[0],E=a[1],S=s[0],M=s[1],w=[u,c,1,0,0,0,-g*u,-g*c,0,0,0,u,c,1,-m*u,-m*c,f,l,1,0,0,0,-b*f,-b*l,0,0,0,f,l,1,-y*f,-y*l,p,h,1,0,0,0,-x*p,-x*h,0,0,0,p,h,1,-E*p,-E*h,d,v,1,0,0,0,-S*d,-S*v,0,0,0,d,v,1,-M*d,-M*v],D=ae(w,8);if(!D.length)return[];var C=he(D,[g,m,b,y,x,E,S,M],8);return C[8]=1,le(C,3,4)}function Oe(t){var e=5381,r=t.length;while(r)e=33*e^t.charCodeAt(--r);return e>>>0}var Pe=Oe;function Re(t){return Pe(t).toString(36)}function ze(t){if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}function Be(t,e,r){var n=document.createElement("style");return n.setAttribute("type","text/css"),n.innerHTML=e.replace(/([^}{]*){/gm,(function(e,r){return I(r).map((function(e){return e.indexOf(":global")>-1?e.replace(/\:global/g,""):e.indexOf(":host")>-1?""+e.replace(/\:host/g,"."+t):"."+t+" "+e})).join(", ")+"{"})),(r||document.head||document.body).appendChild(n),n}function _e(t){var e,r="rCS"+Re(t),n=0;return{className:r,inject:function(i){var o,a=ze(i),s=0===n;return(a||s)&&(o=Be(r,t,a)),s&&(e=o),a||++n,{destroy:function(){a?(i.removeChild(o),o=null):(n>0&&--n,0===n&&e&&(e.parentNode.removeChild(e),e=null))}}}}}var Ge=_e,Te=function(t,e){return Te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Te(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Ae(t,e){function r(){this.constructor=t}Te(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var je=function(){return je=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},je.apply(this,arguments)};function Ne(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function Ie(t,e){var r=Ge(e);return function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ae(n,e),n.prototype.render=function(){var e=this.props,n=e.className,i=void 0===n?"":n,o=Ne(e,["className"]);return ft(t,je({ref:h(this,"element"),className:i+" "+r.className},o))},n.prototype.componentDidMount=function(){this.injectResult=r.inject(this.element)},n.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.prototype.getElement=function(){return this.element},n}(Mt)}var ke=Ie,Xe=function(){return Xe=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Xe.apply(this,arguments)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Ye(t,e,r,n){var i=$e(t),o=$e(e),a=$e(n),s=Ke(n[0],Ze(i,a)),u=Ke(n[0],Ze(o,a));return He(s,u,r[0])}function We(t){return t.touches&&t.touches.length>=2}function qe(t){return t.touches?Ve(t.touches):[Ue(t)]}function He(t,e,r){var n=t.clientX,i=t.clientY,o=e.clientX,a=e.clientY,s=r.clientX,u=r.clientY,c=n-o,f=i-a,l=n-s,p=i-u;return{clientX:n,clientY:i,deltaX:c,deltaY:f,distX:l,distY:p}}function Le(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Fe(t,e,r){return t.map((function(t,n){return He(t,e[n],r[n])}))}function Ve(t){for(var e=Math.min(t.length,2),r=[],n=0;n<e;++n)r.push(Ue(t[n]));return r}function Ue(t){return{clientX:t.clientX,clientY:t.clientY}}function $e(t){return 1===t.length?t[0]:{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function Ke(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function Ze(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var Je=function(){function t(t,e){var r=this;void 0===e&&(e={}),this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.targets=[],this.prevTime=0,this.isDouble=!1,this.onDragStart=function(t){if(r.flag||!1!==t.cancelable){var e=r.options,n=e.container,i=e.pinchOutside,o=e.dragstart,a=e.preventRightClick,s=e.preventDefault,u=r.isTouch;if(!r.flag&&u&&i&&setTimeout((function(){$(n,"touchstart",r.onDragStart)})),r.flag&&u&&i&&K(n,"touchstart",r.onDragStart),We(t)){if(!r.flag&&t.touches.length!==t.changedTouches.length)return;r.pinchFlag||r.onPinchStart(t)}if(!r.flag){var c=r.startClients[0]?r.startClients:qe(t);r.customDist=[0,0],r.flag=!0,r.isDrag=!1,r.startClients=c,r.prevClients=c,r.datas={},r.movement=0;var f=He(c[0],r.prevClients[0],r.startClients[0]);(a&&(3===t.which||2===t.button)||!1===(o&&o(Xe({type:"dragstart",datas:r.datas,inputEvent:t},f))))&&(r.startClients=[],r.prevClients=[],r.flag=!1),r.isDouble=q()-r.prevTime<200,r.flag&&s&&t.preventDefault()}}},this.onDrag=function(t,e){if(r.flag){var n=qe(t);r.pinchFlag&&r.onPinch(t,n);var i=r.move([0,0],t,n);if(i&&(i.deltaX||i.deltaY)){var o=r.options.drag;o&&o(Xe({},i,{isScroll:!!e,inputEvent:t}))}}},this.onDragEnd=function(t){if(r.flag){var e=r.options,n=e.dragend,i=e.pinchOutside,o=e.container;r.isTouch&&i&&K(o,"touchstart",r.onDragStart),r.pinchFlag&&r.onPinchEnd(t),r.flag=!1;var a=r.prevClients,s=r.startClients,u=r.pinchFlag?Ye(a,a,s,r.startPinchClients):He(a[0],a[0],s[0]),c=q(),f=!r.isDrag&&r.isDouble;r.prevTime=r.isDrag||f?0:c,r.startClients=[],r.prevClients=[],n&&n(Xe({type:"dragend",datas:r.datas,isDouble:f,isDrag:r.isDrag,inputEvent:t},u))}};var n=[].concat(t);this.options=Xe({container:n.length>1?window:n[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},e);var i=this.options,o=i.container,a=i.events;if(this.isTouch=a.indexOf("touch")>-1,this.isMouse=a.indexOf("mouse")>-1,this.customDist=[0,0],this.targets=n,this.isMouse&&(n.forEach((function(t){$(t,"mousedown",r.onDragStart)})),$(o,"mousemove",this.onDrag),$(o,"mouseup",this.onDragEnd),$(o,"contextmenu",this.onDragEnd)),this.isTouch){var s={passive:!1};n.forEach((function(t){$(t,"touchstart",r.onDragStart,s)})),$(o,"touchmove",this.onDrag,s),$(o,"touchend",this.onDragEnd,s),$(o,"touchcancel",this.onDragEnd,s)}}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinchFlag=function(){return this.pinchFlag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(t,e,r,n){void 0===n&&(n=!0),this.flag&&(this.startClients.forEach((function(r){r.clientX-=t,r.clientY-=e})),this.prevClients.forEach((function(r){r.clientX-=t,r.clientY-=e})),n&&this.onDrag(r,!0))},e.move=function(t,e,r){var n=t[0],i=t[1];void 0===r&&(r=this.prevClients);var o=this.customDist,a=this.prevClients,s=this.startClients,u=this.pinchFlag?Ye(r,a,s,this.startPinchClients):He(r[0],a[0],s[0]);o[0]+=n,o[1]+=i,u.deltaX+=n,u.deltaY+=i;var c=u.deltaX,f=u.deltaY;return u.distX+=o[0],u.distY+=o[1],this.movement+=Math.sqrt(c*c+f*f),this.prevClients=r,this.isDrag=!0,Xe({type:"drag",datas:this.datas},u,{movement:this.movement,isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},e.onPinchStart=function(t){var e,r,n=this.options,i=n.pinchstart,o=n.pinchThreshold;if(!(this.isDrag&&this.movement>o)){var a=Ve(t.changedTouches);if(this.pinchFlag=!0,(e=this.startClients).push.apply(e,a),(r=this.prevClients).push.apply(r,a),this.startDistance=Le(this.prevClients),this.startPinchClients=this.prevClients.slice(),i){var s=this.prevClients,u=$e(s),c=He(u,u,u);i(Xe({type:"pinchstart",datas:this.datas,touches:Fe(s,s,s)},c,{inputEvent:t}))}}},e.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){this.isPinch=!0;var r=this.options.pinch;if(r){var n=this.prevClients,i=this.startClients,o=He($e(e),$e(n),$e(i)),a=Le(e);r(Xe({type:"pinch",datas:this.datas,movement:this.movement,touches:Fe(e,n,i),scale:a/this.startDistance,distance:a},o,{inputEvent:t}))}}},e.onPinchEnd=function(t){if(this.flag&&this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var r=this.options.pinchend;if(r){var n=this.prevClients,i=this.startClients,o=He($e(n),$e(n),$e(i));r(Xe({type:"pinchend",datas:this.datas,isPinch:e,touches:Fe(n,n,i)},o,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}}},e.unset=function(){var t=this,e=this.targets,r=this.options.container;this.isMouse&&(e.forEach((function(e){K(e,"mousedown",t.onDragStart)})),K(r,"mousemove",this.onDrag),K(r,"mouseup",this.onDragEnd),K(r,"contextmenu",this.onDragEnd)),this.isTouch&&(e.forEach((function(e){K(e,"touchstart",t.onDragStart)})),K(r,"touchstart",this.onDragStart),K(r,"touchmove",this.onDrag),K(r,"touchend",this.onDragEnd),K(r,"touchcancel",this.onDragEnd))},t}();var Qe=Je,tr=function(t,e){return tr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},tr(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function er(t,e){function r(){this.constructor=t}tr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function rr(t){var e=t.container;return[e.scrollLeft,e.scrollTop]}var nr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startRect=null,e.startPos=[],e.prevTime=0,e.timer=0,e}er(e,t);var r=e.prototype;return r.dragStart=function(t,e){var r=e.container.getBoundingClientRect(),n=r.top,i=r.left,o=r.width,a=r.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:n,left:i,width:o,height:a}},r.drag=function(t,e){var r=this,n=t.clientX,i=t.clientY,o=e.container,a=e.threshold,s=void 0===a?0:a,u=e.throttleTime,c=void 0===u?0:u,f=e.getScrollPosition,l=void 0===f?rr:f,p=this,h=p.startRect,d=p.startPos,v=q(),g=Math.max(c+this.prevTime-v,0),m=[0,0];if(h.top>i-s?(d[1]>h.top||i<d[1])&&(m[1]=-1):h.top+h.height<i+s&&(d[1]<h.top+h.height||i>d[1])&&(m[1]=1),h.left>n-s?(d[0]>h.left||n<d[0])&&(m[0]=-1):h.left+h.width<n+s&&(d[0]<h.left+h.width||n>d[0])&&(m[0]=1),clearTimeout(this.timer),!m[0]&&!m[1])return!1;if(g>0)return this.timer=window.setTimeout((function(){r.drag(t,e)}),g),!1;this.prevTime=v;var b=l({container:o,direction:m});this.trigger("scroll",{container:o,direction:m,inputEvent:t});var y=l({container:o,direction:m}),x=y[0]-b[0],E=y[1]-b[1];return!(!x&&!E)&&(this.trigger("move",{offsetX:m[0]?x:0,offsetY:m[1]?E:0,inputEvent:t}),c&&(this.timer=window.setTimeout((function(){r.drag(t,e)}),c)),!0)},r.dragEnd=function(){clearTimeout(this.timer)},e}(f),ir=nr,or=function(t,e){return or=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},or(t,e)};function ar(t,e){function r(){this.constructor=t}or(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var sr="function"===typeof Map?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),ur=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,sr)||this}return ar(e,t),e}(w);var cr=ur,fr=function(t,e){return fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},fr(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function lr(t,e){function r(){this.constructor=t}fr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var pr=function(){return pr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pr.apply(this,arguments)};function hr(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+e+'deg);transform-origin: 16px 16px"></path></svg>'}function dr(t){var e=hr(1,t),r=hr(2,t),n=45*Math.round(t/45)%180,i=135===n?"nwse-resize":45===n?"nesw-resize":90===n?"ew-resize":"ns-resize";return"cursor:"+i+";cursor: url('"+e+"') 16 16, "+i+";cursor: -webkit-image-set(url('"+e+"') 1x, url('"+r+"') 2x) 16 16, "+i+";"}var vr=ee(),gr=vr.os.name.indexOf("ios")>-1||vr.browser.name.indexOf("safari")>-1,mr="moveable-",br=p(mr,"\n{\n\tposition: fixed;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --zoom: 1;\n    --zoompx: 1px;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    width: calc(14 * var(--zoompx));\n    height: calc(14 * var(--zoompx));\n    margin-top: calc(-7 * var(--zoompx));\n    margin-left: calc(-7 * var(--zoompx));\n    border: calc(2 * var(--zoompx)) solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    width: var(--zoompx);\n    height: var(--zoompx);\n\tbackground: #4af;\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top: var(--zoompx) dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left: var(--zoompx) dashed #4af;\n}\n.line.dashed:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #4af;\n    font-size: 12px;\n    font-weight: bold;\n}\n.line.dashed.horizontal:before, .line.gap.horizontal:before {\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 5px;\n}\n.line.dashed.vertical:before, .line.gap.vertical:before {\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.line.rotation-line {\n\theight: 40px;\n    width: 1px;\n    transform-origin: 50% calc(100% - 0.5px);\n    top: -40px;\n    width: var(--zoompx);\n    height: calc(40 * var(--zoompx));\n    top: calc(-40 * var(--zoompx));\n    transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n    cursor: alias;\n    left: 50%;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n    width: calc(2 * var(--zoompx));\n}\n.line.horizontal.bold {\n    height: 2px;\n    height: calc(2 * var(--zoompx));\n}\n\n.line.gap {\n    background: #f55;\n}\n.line.gap:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n    width: calc(12 * var(--zoompx));\n    height: calc(12 * var(--zoompx));\n    margin-top: calc(-6 * var(--zoompx));\n    margin-left: calc(-6 * var(--zoompx));\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+dr(t)+"\n}\n"})).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n.control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: pointer;\n}\n"+(gr?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n"),yr=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],xr=1e-7,Er=1e-9,Sr=Math.pow(10,10),Mr=-Sr,wr=["nw","ne","sw","se","n","w","s","e"],Dr={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},Cr={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135};function Or(t,e){return[t[0]*e[0],t[1]*e[1]]}function Pr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return l.apply(void 0,[mr].concat(t))}function Rr(){return Me(3)}function zr(t){if(!t||"none"===t)return[1,0,0,1,0,0];if(_(t))return t;var e=k(t).value;return e.split(/s*,\s*/g).map((function(t){return parseFloat(t)}))}function Br(t,e,r){return pe(e,De(r,e),t,De(r.map((function(t){return-t})),e))}function _r(t,e,r){if("%"===e){var n=kr(t.ownerSVGElement);return n[r?"width":"height"]/100}return 1}function Gr(t){var e=Tr(gn(t,":before"));return e.map((function(e,r){var n=X(e),i=n.value,o=n.unit;return i*_r(t,o,0===r)}))}function Tr(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function Ar(t,e,r){var n=document.body,i=!t||r?t:t.parentElement,o=!1,a="relative";while(i&&i!==n){e===i&&(o=!0);var s=gn(i),u=s.transform;if(a=s.position,"static"!==a||u&&"none"!==u)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===n,offsetParent:i||n}}function jr(t,e,r,n){var i,o=t.tagName.toLowerCase(),a=t.offsetLeft,s=t.offsetTop;if(n){var u=(e||document.documentElement).getBoundingClientRect();a-=u.left,s-=u.top}var c,f=B(a),l=!f;return l||"svg"===o?c=Tr(r).map((function(t){return parseFloat(t)})):(c=gr?Gr(t):Tr(r).map((function(t){return parseFloat(t)})),l=!0,"g"===o?(a=0,s=0):(i=Yr(t,c),a=i[0],s=i[1],c[0]=i[2],c[1]=i[3])),{isSVG:f,hasOffset:l,offset:[a,s],origin:c}}function Nr(t,e,r){var n,i,o=t,a=[],s=!1,u=!1,c=3,f=Ar(e,e,!0).offsetParent;r&&(s=t===e,r.length>10&&(u=!0,c=4),e=t.parentElement);while(o&&!s){var l=gn(o),p=o.tagName.toLowerCase(),h=l.position,d="fixed"===h,v=l.transform,g=xe(zr(v)),m=g.length;if(!u&&16===m){u=!0,c=4;for(var b=a.length,y=0;y<b;++y)a[y]=le(a[y],3,4)}u&&9===m&&(g=le(g,3,4));var x=jr(o,e,l,d),E=x.hasOffset,S=x.isSVG,M=x.origin,w=x.offset,D=w[0],C=w[1];"svg"===p&&i&&a.push(Xr(o,c),Me(c));var O=Ar(o,e),P=O.offsetParent,R=O.isEnd,z=O.isStatic;gr&&E&&!S&&z&&"relative"===h&&(D-=P.offsetLeft,C-=P.offsetTop,s=s||R);var B=0,_=0;if(E&&f!==P&&(B=P.clientLeft,_=P.clientTop),a.push(Br(g,c,M),De(E?[D-o.scrollLeft+B,C-o.scrollTop+_]:[o,M],c)),i||(i=g),n||(n=M),s||d)break;o=P,s=R}return i||(i=Me(c)),n||(n=[0,0]),{offsetContainer:f,matrixes:a,targetMatrix:i,transformOrigin:n,is3d:u}}function Ir(t,e,r,n,i,o){var a=Nr(t,e,n),s=a.matrixes,u=a.is3d,c=a.targetMatrix,f=a.transformOrigin,l=a.offsetContainer,p=Nr(l,r,i),h=p.matrixes,d=p.is3d,v=d||u?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,m=e||document.body,b=n?le(n,o,v):Me(v),y=c,x=i?le(i,o,v):Me(v),E=n?le(n,o,v):Me(v),S=Me(v),M=s.length,w=Ar(m,m,!0).offsetParent;h.reverse(),s.reverse(),!u&&d&&(y=le(y,3,4),s.forEach((function(t,e){s[e]=le(t,3,4)}))),u&&!d&&h.forEach((function(t,e){h[e]=le(t,3,4)})),i||h.forEach((function(t){x=he(x,t,v)})),s.forEach((function(t,e){var r;M-2===e&&(E=b.slice()),M-1===e&&(S=b.slice()),_(t[v-1])&&(r=Fr(t[v-1],w,v,t[2*v-1],b,s[e+1]),t[v-1]=r[0],t[2*v-1]=r[1]),b=he(b,t,v)}));var D=!g&&u;y||(y=Me(D?4:3));var C=(D?"matrix3d":"matrix")+"("+Ee(g&&16===y.length?le(y,4,3):y)+")";return x=oe(x,v,v),[x,E,S,b,y,C,f,u||d]}function kr(t){var e=t.clientWidth,r=t.clientHeight,n=t.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||r}}function Xr(t,e){var r=t.clientWidth,n=t.clientHeight,i=kr(t),o=i.width,a=i.height,s=r/o,u=n/a,c=t.preserveAspectRatio.baseVal,f=c.align,l=c.meetOrSlice,p=[0,0],h=[s,u],d=[0,0];if(1!==f){var v=(f-2)%3,g=Math.floor((f-2)/3);p[0]=o*v/2,p[1]=a*g/2;var m=2===l?Math.max(u,s):Math.min(s,u);h[0]=m,h[1]=m,d[0]=(r-o)/2*v,d[1]=(n-a)/2*g}var b=we(h,e);return b[e-1]=d[0],b[2*e-1]=d[1],Br(b,e,p)}function Yr(t,e){if(!t.getBBox)return[0,0];var r=t.getBBox(),n=kr(t.ownerSVGElement),i=r.x-n.x,o=r.y-n.y;return[i,o,e[0]-i,e[1]-o]}function Wr(t,e,r){return be(t,fe(e,r),r)}function qr(t,e,r,n){return[[0,0],[e,0],[0,r],[e,r]].map((function(e){return Wr(t,e,n)}))}function Hr(t){var e=t.map((function(t){return t[0]})),r=t.map((function(t){return t[1]})),n=Math.min.apply(Math,e),i=Math.min.apply(Math,r),o=Math.max.apply(Math,e),a=Math.max.apply(Math,r),s=o-n,u=a-i;return{left:n,top:i,right:o,bottom:a,width:s,height:u}}function Lr(t,e,r,n){var i=qr(t,e,r,n);return Hr(i)}function Fr(t,e,r,n,i,o){var a,s=Qr(t),u=s[0],c=s[1],f=e.getBoundingClientRect(),l=t.getBoundingClientRect(),p=l.left-f.left+e.scrollLeft,h=l.top-f.top+e.scrollTop,d=l.width,v=l.height,g=pe(r,i,o),m=Lr(g,u,c,r),b=m.left,y=m.top,x=m.width,E=m.height,S=Wr(g,n,r),M=me(S,[b,y]),w=[p+M[0]*d/x,h+M[1]*v/E],D=[0,0],C=0;while(++C<10){var O=ae(i,r);a=me(Wr(O,w,r),Wr(O,S,r)),D[0]=a[0],D[1]=a[1];var P=pe(r,i,De(D,r),o),R=Lr(P,u,c,r),z=R.left,B=R.top,_=z-p,G=B-h;if(Math.abs(_)<2&&Math.abs(G)<2)break;w[0]-=_,w[1]-=G}return D.map((function(t){return Math.round(t)}))}function Vr(t,e,r,n){var i=16===t.length,o=i?4:3,a=qr(t,r,n,o),s=a[0],u=s[0],c=s[1],f=a[1],l=f[0],p=f[1],h=a[2],d=h[0],v=h[1],g=a[3],m=g[0],b=g[1],y=Wr(t,e,o),x=y[0],E=y[1],S=Math.min(u,l,d,m),M=Math.min(c,p,v,b),w=Math.max(u,l,d,m),D=Math.max(c,p,v,b);u=u-S||0,l=l-S||0,d=d-S||0,m=m-S||0,c=c-M||0,p=p-M||0,v=v-M||0,b=b-M||0,x=x-S||0,E=E-M||0;var C=[(u+l+d+m)/4,(c+p+v+b)/4],O=ue(C,[u,c]),P=ue(C,[l,p]),R=O<P&&P-O<Math.PI||O>P&&P-O<-Math.PI?1:-1;return[[S,M,w,D],[x,E],[[u,c],[l,p],[d,v],[m,b]],R]}function Ur(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function $r(t,e){return Ur([e[0]-t[0],e[1]-t[1]])}function Kr(t,e,r){void 0===r&&(r=ue(t,e));var n=$r(t,e);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+r+"rad)",width:n+"px"}}function Zr(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=e.length,i=e.reduce((function(t,e){return t+e[0]}),0)/n,o=e.reduce((function(t,e){return t+e[1]}),0)/n;return{transform:"translate("+i+"px, "+o+"px) rotate("+t+"rad)"}}function Jr(t){var e=window.getComputedStyle(t);return[parseFloat(e.width),parseFloat(e.height)]}function Qr(t,e,r,n){void 0===e&&(e=window.getComputedStyle(t)),void 0===n&&(n=r||"border-box"===e.boxSizing);var i=t.offsetWidth,o=t.offsetHeight,a=!B(i);if((r||n)&&a)return[i,o];if(i=t.clientWidth,o=t.clientHeight,!a&&!i&&!o){var s=t.getBBox();return[s.width,s.height]}if(r||n){var u=parseFloat(e.borderLeftWidth)||0,c=parseFloat(e.borderRightWidth)||0,f=parseFloat(e.borderTopWidth)||0,l=parseFloat(e.borderBottomWidth)||0;return[i+u+c,o+f+l]}var p=parseFloat(e.paddingLeft)||0,h=parseFloat(e.paddingRight)||0,d=parseFloat(e.paddingTop)||0,v=parseFloat(e.paddingBottom)||0;return[i-p-h,o-d-v]}function tn(t,e){return ue(e>0?t[0]:t[1],e>0?t[1]:t[0])}function en(t,e,r,n,i,o){var a,s,u,c,f,l=0,p=0,h=0,d=0,v=[0,0],g=[[0,0],[0,0],[0,0],[0,0]],m=Rr(),b=Rr(),y=Rr(),x=Rr(),E=Rr(),S=0,M=0,w=[0,0],D=1,C=1,O=!1,P="",R=[0,0],z=rn(),_=rn(),G=rn(),T=0,A=o?o.beforeMatrix:void 0,j=o?o.rootMatrix:void 0,N=o?o.is3d?4:3:void 0;if(e){if(o)S=o.width,M=o.height;else{var I=gn(e);S=e.offsetWidth,M=e.offsetHeight,B(S)&&(a=Qr(e,I,!0),S=a[0],M=a[1])}s=Ir(e,r,i,A,j,N),m=s[0],y=s[1],b=s[2],x=s[3],E=s[4],P=s[5],w=s[6],O=s[7],u=Vr(x,w,S,M),c=u[0],l=c[0],p=c[1],h=c[2],d=c[3],v=u[1],g=u[2],D=u[3];var k=O?4:3,X=[0,0];f=Vr(b,ge(w,ce(E,k)),S,M),X=f[0],R=f[1],C=f[3],R=[R[0]+X[0]-l,R[1]+X[1]-p],z=nn(e),_=nn(Ar(n,n,!0).offsetParent||document.body,!0),t&&(G=nn(t)),T=tn([g[0],g[1]],D)}return{rotation:T,targetClientRect:z,containerClientRect:_,moveableClientRect:G,beforeDirection:C,direction:D,target:e,left:l,top:p,right:h,bottom:d,pos1:g[0],pos2:g[1],pos3:g[2],pos4:g[3],width:S,height:M,rootMatrix:m,beforeMatrix:y,offsetMatrix:b,targetMatrix:E,matrix:x,targetTransform:P,is3d:O,beforeOrigin:R,origin:v,transformOrigin:w}}function rn(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function nn(t,e){var r=t.getBoundingClientRect(),n=r.left,i=r.width,o=r.top,a=r.bottom,s=r.right,u=r.height,c={left:n,right:s,top:o,bottom:a,width:i,height:u};return e&&(c.clientLeft=t.clientLeft,c.clientTop=t.clientTop,c.clientWidth=t.clientWidth,c.clientHeight=t.clientHeight,c.scrollWidth=t.scrollWidth,c.scrollHeight=t.scrollHeight),c}function on(t){if(t){var e=t.getAttribute("data-direction");if(e){var r=[0,0];return e.indexOf("w")>-1&&(r[0]=-1),e.indexOf("e")>-1&&(r[0]=1),e.indexOf("n")>-1&&(r[1]=-1),e.indexOf("s")>-1&&(r[1]=1),r}}}function an(t,e){return[ge(e,t[0]),ge(e,t[1]),ge(e,t[2]),ge(e,t[3])]}function sn(t){var e=t.left,r=t.top,n=t.pos1,i=t.pos2,o=t.pos3,a=t.pos4;return an([n,i,o,a],[e,r])}function un(t){return Math.round(t%1===-.5?t-1:t)}function cn(t,e){return e?Math.round(t/e)*e:t}function fn(t,e){return t.forEach((function(r,n){t[n]=cn(t[n],e)})),t}function ln(t,e){t[e]&&(t[e].unset(),t[e]=null)}function pn(t,e,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function hn(t,e,r,n,i){var o=pn(t,e,r),a=pn(t,r,n),s=pn(t,n,e),u=pn(t,r,n),c=pn(t,n,i),f=pn(t,i,r),l=[o,a,s],p=[u,c,f];return!!(l.every((function(t){return t>=0}))||l.every((function(t){return t<=0}))||p.every((function(t){return t>=0}))||p.every((function(t){return t<=0})))}function dn(t,e,r){var n=e.datas;return n.datas||(n.datas={}),pr({},r,{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,datas:n.datas})}function vn(t,e,r,n){return n&&Xn.prototype.triggerEvent.call(t,e,r),t.triggerEvent(e,r)}function gn(t,e){return window.getComputedStyle(t,e)}function mn(t,e,r){var n={},i={};return t.filter((function(t){var o=t.name;if(n[o]||!e.some((function(e){return t[e]})))return!1;if(!r&&t.ableGroup){if(i[t.ableGroup])return!1;i[t.ableGroup]=!0}return n[o]=!0,!0}))}function bn(t,e,r){return t*(e?r:1/r)}function yn(t,e,r){return t*(e?1/r:r)}function xn(t,e){return t===e||null==t&&null==e}function En(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,n=0;n<r;++n){var i=t[n];if(!B(i))return i}return t[r]}function Sn(t,e){var r=[],n=[];return t.forEach((function(i,o){var a=e(i,o,t),s=n.indexOf(a),u=r[s]||[];-1===s&&(n.push(a),r.push(u)),u.push(i)})),r}function Mn(t,e){var r=[],n={};return t.forEach((function(i,o){var a=e(i,o,t),s=n[a];s||(s=[],n[a]=s,r.push(s)),s.push(i)})),r}function wn(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function Dn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(e)-Math.abs(t)})),t[0]}function Cn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(t)-Math.abs(e)})),t[0]}function On(t,e,r){return be(ae(t,r),fe(e,r),r)}function Pn(t,e){var r,n=t.is3d,i=t.rootMatrix,o=n?4:3;return r=On(i,[e.distX,e.distY],o),e.distX=r[0],e.distY=r[1],e}function Rn(t,e,r,n,i){return me(Wr(t,ge(r,e),i),n)}function zn(t,e,r){return[[e[0],e[0]*t[1]/t[0]],[e[1]*t[0]/t[1],e[1]]].filter((function(t){return t.every((function(t,n){return r?t<=e[n]:t>=e[n]}))}))[0]||t}function Bn(t,e,r,n){if(!n)return t.map((function(t,n){return Math.min(r[n],Math.max(t,e[n]))}));var i=t[0],o=t[1],a=zn(t,e,!1),s=a[0],u=a[1],c=zn(t,r,!0),f=c[0],l=c[1];return i<s||o<u?(i=s,o=u):(i>f||o>l)&&(i=f,o=l),[i,o]}function _n(t,e,r){var n=dn(t,r,{isPinch:!!r.isPinch}),i=e?"Group":"";e&&(n.targets=t.props.targets),vn(t,"onRender"+i+"Start",n)}function Gn(t,e,r){var n=dn(t,r,{isPinch:!!r.isPinch}),i=e?"Group":"";e&&(n.targets=t.props.targets),vn(t,"onRender"+i,n)}function Tn(t,e,r){var n=dn(t,r,{isPinch:!!r.sPinch,isDrag:r.isDrag}),i=e?"Group":"";e&&(n.targets=t.props.targets),vn(t,"onRender"+i+"End",n)}function An(t,e,r,n,i,o,a){var s="Start"===i;if(s&&n.indexOf("Control")>-1&&!o.isRequest&&t.areaElement===o.inputEvent.target)return!1;var u=""+r+n+i,c=""+r+n+"Condition",f="End"===i,l=i.indexOf("After")>-1;s&&t.updateRect(i,!0,!1),""!==i||l||Pn(t.state,o);var p=n.indexOf("Group")>-1,h=t[e];if(!h.length)return!1;var d=h.filter((function(t){return t[u]})),v=o.datas,g=v.render||(v.render={}),m=pr({},o,{datas:g,originalDatas:v}),b=d.filter((function(e){var r=s&&e[c],n=e.name,i=v[n]||(v[n]={});return!(r&&!r(o,t))&&e[u](t,pr({},o,{datas:i,originalDatas:v}))})),y=b.length;if(s){if(d.length&&!y)return t.state.dragger=null,t.moveables&&t.moveables.forEach((function(t){t.state.dragger=null})),!1;_n(t,p,m)}else f?Tn(t,p,m):y&&Gn(t,p,m);if(f&&(t.state.dragger=null),t.isUnmounted)return!1;!s&&y&&(b.some((function(t){return t.updateRect}))&&!p?t.updateRect(i,!1,!1):t.updateRect(i,!0,!1)),(!s&&y||f&&!y)&&!a&&t.forceUpdate(),s||f||l||!y||An(t,e,r,n,i+"After",o)}function jn(t,e,r){var n=t.controlBox.getElement(),i=[];i.push(n),t.props.dragArea||i.push(e);var o=function(e){var r=e.inputEvent.target,n=t.areaElement;return r===n||!t.isMoveableElement(r)||r.className.indexOf("moveable-area")>-1||r.className.indexOf("moveable-padding")>-1};return Nn(t,i,"targetAbles",r,{dragstart:o,pinchstart:o})}function Nn(t,e,r,n,i){void 0===i&&(i={});var o=t.props,a=o.pinchOutside,s=o.pinchThreshold,u={container:window,pinchThreshold:s,pinchOutside:a};return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(o){var a=""+e+o.toLowerCase();u[a]=function(s){return!(i[a]&&!i[a](s))&&An(t,r,e,n,o,s)}}))})),new Qe(e,u)}var In=ke("div",br);function kn(t,e,r,n){var i=ue(e,r),o=t?cn(i/Math.PI*180,15)%180:-1;return ft("div",{key:"line"+n,className:Pr("line","direction",t),"data-rotation":o,"data-direction":t,style:Kr(e,r,i)})}var Xn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={container:null,target:null,beforeMatrix:Rr(),matrix:Rr(),targetMatrix:Rr(),offsetMatrix:Rr(),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],renderPoses:[[0,0],[0,0],[0,0],[0,0]],targetClientRect:rn(),containerClientRect:rn(),moveableClientRect:rn(),rotation:0},e.targetAbles=[],e.controlAbles=[],e.isUnmounted=!1,e}lr(e,t);var r=e.prototype;return r.render=function(){var t=this.props,e=this.state,r=t.edge,n=t.parentPosition,i=t.className,o=t.target,a=t.zoom;this.checkUpdate(),this.updateRenderPoses();var s=n||{left:0,top:0},u=s.left,c=s.top,f=e.left,l=e.top,p=e.target,d=e.direction,v=e.renderPoses,g=t.targets,m=(g&&g.length||o)&&p;return ft(In,{ref:h(this,"controlBox"),className:Pr("control-box",-1===d?"reverse":"")+" "+i,style:{position:"absolute",display:m?"block":"none",transform:"translate("+(f-u)+"px, "+(l-c)+"px) translateZ(50px)","--zoom":a,"--zoompx":a+"px"}},this.renderAbles(),kn(r?"n":"",v[0],v[1],0),kn(r?"e":"",v[1],v[3],1),kn(r?"w":"",v[0],v[2],2),kn(r?"s":"",v[2],v[3],3))},r.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,r=t.container;this.updateEvent(t),r||e||this.updateRect("End",!1,!0)},r.componentDidUpdate=function(t){this.updateEvent(t)},r.componentWillUnmount=function(){this.isUnmounted=!0,ln(this,"targetDragger"),ln(this,"controlDragger")},r.getContainer=function(){var t=this.props,e=t.parentMoveable,r=t.container;return r||e&&e.getContainer()||this.controlBox.getElement().parentElement},r.isMoveableElement=function(t){return t&&(t.getAttribute("class")||"").indexOf(mr)>-1},r.dragStart=function(t){return this.targetDragger&&this.targetDragger.onDragStart(t),this},r.hitTest=function(t){var e;if(t instanceof Element){var r=t.getBoundingClientRect();e={left:r.left,top:r.top,width:r.width,height:r.height}}else e=pr({width:0,height:0},t);var n=this.state.targetClientRect,i=n.left,o=n.top,a=n.width,s=n.height,u=e.left,c=e.top,f=e.width,l=e.height,p=u+f,h=c+l,d=i+a,v=o+s,g=Math.max(i,u),m=Math.min(d,p),b=Math.max(o,c),y=Math.min(v,h);if(m<g||y<b)return 0;var x=(Math.min(d,p)-Math.max(u,i))*(Math.min(v,h)-Math.max(o,c));return Math.min(100,(m-g)*(y-b)/x*100)},r.isInside=function(t,e){var r=this.state,n=r.pos1,i=r.pos2,o=r.pos3,a=r.pos4,s=r.target,u=r.targetClientRect;if(!s)return!1;var c=u.left,f=u.top,l=[t-c,e-f];return hn(l,n,i,o,a)},r.updateRect=function(t,e,r){void 0===r&&(r=!0);var n=this.props,i=n.parentMoveable,o=this.state,a=o.target||this.props.target,s=this.getContainer(),u=i?i.props.rootContainer:n.rootContainer;this.updateState(en(this.controlBox&&this.controlBox.getElement(),a,s,s,u||s,e?o:void 0),!i&&r)},r.updateEvent=function(t){var e=this.controlBox.getElement(),r=this.targetAbles.length,n=this.controlAbles.length,i=this.props,o=i.dragTarget||i.target,a=t.dragTarget||t.target,s=i.dragArea,u=t.dragArea,c=!s&&a!==o,f=!r&&this.targetDragger||c||u!==s;f&&(ln(this,"targetDragger"),this.updateState({dragger:null})),n||ln(this,"controlDragger"),o&&r&&!this.targetDragger&&(this.targetDragger=jn(this,o,"")),!this.controlDragger&&n&&(this.controlDragger=Nn(this,e,"controlAbles","Control")),f&&this.unsetAbles()},r.isDragging=function(){return!!this.targetDragger&&this.targetDragger.isFlag()||!!this.controlDragger&&this.controlDragger.isFlag()},r.updateTarget=function(t){this.updateRect(t,!0)},r.getRect=function(){var t=this.state,e=sn(this.state),r=e[0],n=e[1],i=e[2],o=e[3],a=Hr(e),s=t.width,u=t.height,c=a.width,f=a.height,l=a.left,p=a.top,h=[t.left,t.top],d=ge(h,t.origin),v=ge(h,t.beforeOrigin);return{width:c,height:f,left:l,top:p,pos1:r,pos2:n,pos3:i,pos4:o,offsetWidth:s,offsetHeight:u,beforeOrigin:v,origin:d}},r.request=function(t,e,r){void 0===e&&(e={});var n=this.props,i=n.ables,o=n.groupable,a=i.filter((function(e){return e.name===t}))[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),c=u.isControl?"controlAbles":"targetAbles",f=(o?"Group":"")+(u.isControl?"Control":""),l={request:function(t){return An(s,c,"drag",f,"",pr({},u.request(t),{isRequest:!0}),r),this},requestEnd:function(){return An(s,c,"drag",f,"End",pr({},u.requestEnd(),{isRequest:!0})),this}};return An(s,c,"drag",f,"Start",pr({},u.requestStart(e),{isRequest:!0}),r),e.isInstant?l.request(e).requestEnd():l},r.updateRenderPoses=function(){var t=this.state,e=this.props,r=t.beforeOrigin,n=t.transformOrigin,i=t.matrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,c=t.pos4,f=t.left,l=t.top,p=e.padding||{},h=p.left,d=void 0===h?0:h,v=p.top,g=void 0===v?0:v,m=p.bottom,b=void 0===m?0:m,y=p.right,x=void 0===y?0:y,E=o?4:3,S=e.groupable?r:ge(r,[f,l]);t.renderPoses=[ge(a,Rn(i,[-d,-g],n,S,E)),ge(s,Rn(i,[x,-g],n,S,E)),ge(u,Rn(i,[-d,b],n,S,E)),ge(c,Rn(i,[x,b],n,S,E))]},r.checkUpdate=function(){var t=this.props,e=t.target,r=t.container,n=t.parentMoveable,i=this.state,o=i.target,a=i.container;if(o||e){this.updateAbles();var s=!xn(o,e)||!xn(a,r);s&&(this.updateState({target:e,container:r}),n||!r&&!this.controlBox||this.updateRect("End",!1,!1))}},r.triggerEvent=function(t,e){var r=this.props[t];return r&&r(e)},r.unsetAbles=function(){var t=this;this.targetAbles.filter((function(e){return!!e.unset&&(e.unset(t),!0)})).length&&this.forceUpdate()},r.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var r=this.props,n=r.triggerAblesSimultaneously,i=t.filter((function(t){return t&&r[t.name]})),o="drag"+e+"Start",a="pinch"+e+"Start",s="drag"+e+"ControlStart",u=mn(i,[o,a],n),c=mn(i,[s],n);this.targetAbles=u,this.controlAbles=c},r.updateState=function(t,e){if(e)this.setState(t);else{var r=this.state;for(var n in t)r[n]=t[n]}},r.renderAbles=function(){var t=this,e=this.props,r=e.ables,n=e.triggerAblesSimultaneously,i=r.filter((function(t){return t&&e[t.name]})),o={createElement:ft};return Mn(wn(mn(i,["render"],n).map((function(e){var r=e.render;return r(t,o)||[]}))).filter((function(t){return t})),(function(t){var e=t.key;return e})).map((function(t){return t[0]}))},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0},e}(wt);function Yn(t){return ue([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}var Wn={name:"pinchable",updateRect:!0,props:{pinchable:Boolean,pinchOutside:Boolean,pinchThreshold:Number},pinchStart:function(t,e){var r=e.datas,n=e.touches,i=e.targets,o=t.props,a=o.pinchable,s=o.ables;if(!a)return!1;var u="onPinch"+(i?"Group":"")+"Start",c="drag"+(i?"Group":"")+"ControlStart",f=(!0===a?t.controlAbles:s.filter((function(t){return a.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[c]})),l=dn(t,e,{});i&&(l.targets=i);var p=vn(t,u,l);r.isPinch=!1!==p,r.ables=f;var h=r.isPinch;if(!h)return!1;var d=Yn(n);return f.forEach((function(n){if(r[n.name+"Datas"]={},n[c]){var i=pr({},e,{datas:r[n.name+"Datas"],parentRotate:d,isPinch:!0});n[c](t,i)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},h},pinch:function(t,e){var r=e.datas,n=e.scale,i=e.distance,o=e.touches,a=e.inputEvent,s=e.targets;if(r.isPinch){var u=Yn(o),c=i*(1-1/n),f=dn(t,e,{});s&&(f.targets=s);var l="onPinch"+(s?"Group":"");vn(t,l,f);var p=r.ables,h="drag"+(s?"Group":"")+"Control";return p.forEach((function(n){n[h]&&n[h](t,pr({},e,{datas:r[n.name+"Datas"],inputEvent:a,parentDistance:c,parentRotate:u,isPinch:!0}))})),f}},pinchEnd:function(t,e){var r=e.datas,n=e.isPinch,i=e.inputEvent,o=e.targets;if(r.isPinch){var a="onPinch"+(o?"Group":"")+"End",s=dn(t,e,{isDrag:n});o&&(s.targets=o),vn(t,a,s);var u=r.ables,c="drag"+(o?"Group":"")+"ControlEnd";return u.forEach((function(o){o[c]&&o[c](t,pr({},e,{isDrag:n,datas:r[o.name+"Datas"],inputEvent:i,isPinch:!0}))})),n}},pinchGroupStart:function(t,e){return this.pinchStart(t,pr({},e,{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,pr({},e,{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,pr({},e,{targets:t.props.targets}))}};function qn(t,e,r,n,i){var o=t.dragger.move(e,r),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return pr({},i?Pn(t,o):o,{isDrag:!0,isPinch:!!n,parentEvent:!0,datas:s})}var Hn=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){return this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},pr({},this.move(t,e),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var r,n;return this.isFlag?(r=this.prevX+t[0],n=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],n=t[1],this.isFlag=!0),this.prevX=r,this.prevY=n,{type:"drag",clientX:r,clientY:n,inputEvent:e,isDrag:this.isDrag,distX:r-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentDragger:this}},t}();function Ln(t,e,r,n,i,o){var a=!!r.match(/Start$/g),s=!!r.match(/End$/g),u=i.inputEvent,c=i.isPinch,f=i.datas,l=t.moveables.map((function(t,i){var l={};a?l=(new Hn).dragStart(n,u):(t.state.dragger||(t.state.dragger=f.childDraggers[i]),l=qn(t.state,n,u,c,o));var p=e[r](t,pr({},l,{parentFlag:!0}));return s&&(t.state.dragger=null),p}));return a&&(f.childDraggers=t.moveables.map((function(t){return t.state.dragger}))),l}function Fn(t,e,r,n,i,o){var a=e.name,s=n[a]||(n[a]=[]),u=!!r.match(/End$/g),c=t.moveables.map((function(t,n){var a=s[n]||(s[n]={}),c=A(i)?i(t,a):i,f=e[r](t,pr({},c,{datas:a,parentFlag:!0}));return f&&o&&o(t,a,f,n),u&&(t.state.dragger=null),f}));return c}function Vn(t,e){var r=e.datas,n=t.state,i=n.matrix,o=n.beforeMatrix,a=n.is3d,s=n.left,u=n.top,c=n.origin,f=n.offsetMatrix,l=n.targetMatrix,p=n.transformOrigin,h=a?4:3;r.is3d=a,r.matrix=i,r.targetMatrix=l,r.beforeMatrix=o,r.offsetMatrix=f,r.transformOrigin=p,r.inverseMatrix=ae(i,h),r.inverseBeforeMatrix=ae(o,h),r.absoluteOrigin=fe(ge([s,u],c),h),r.startDragBeforeDist=be(r.inverseBeforeMatrix,r.absoluteOrigin,h),r.startDragDist=be(r.inverseMatrix,r.absoluteOrigin,h)}function Un(t,e){var r=t.datas,n=t.distX,i=t.distY,o=r.inverseBeforeMatrix,a=r.inverseMatrix,s=r.is3d,u=r.startDragBeforeDist,c=r.startDragDist,f=r.absoluteOrigin,l=s?4:3;return me(be(e?o:a,ge(f,[n,i]),l),e?u:c)}function $n(t,e){var r=t.datas,n=t.distX,i=t.distY,o=r.beforeMatrix,a=r.matrix,s=r.is3d,u=r.startDragBeforeDist,c=r.startDragDist,f=r.absoluteOrigin,l=s?4:3;return me(be(e?o:a,ge(e?u:c,[n,i]),l),f)}function Kn(t,e,r,n,i,o){return void 0===n&&(n=e),void 0===i&&(i=r),void 0===o&&(o=[0,0]),t?t.map((function(t,a){var s=X(t),u=s.value,c=s.unit,f=a?i:n,l=a?r:e;if("%"===t||isNaN(u)){var p=f?o[a]/f:0;return l*p}return"%"!==c?u:l*u/100})):o}function Zn(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Jn(t,e){return Zn(e).map((function(e){return t[e]}))}function Qn(t,e){var r=Jn(t,e);return[ve.apply(void 0,r.map((function(t){return t[0]}))),ve.apply(void 0,r.map((function(t){return t[1]})))]}function ti(t,e){var r=t[0],n=t[1],i=t[2],o=t[3];return Qn([o,i,n,r],e)}function ei(t,e){var r=t[0],n=t[1],i=t[2],o=t[3];return ti([r,n,i,o],e)}function ri(t,e,r,n,i,o){var a=qr(e,r,n,i),s=ti(a,o),u=t[0]-s[0],c=t[1]-s[1];return[u,c]}function ni(t,e,r,n){return he(t,Br(e,n,r),n)}function ii(t,e){var r=t.transformOrigin,n=t.offsetMatrix,i=t.is3d,o=t.targetMatrix,a=i?4:3;return ni(n,he(o,we(e,a),a),r,a)}function oi(t,e,r,n){var i=t.state,o=i.is3d,a=i.left,s=i.top,u=i.width,c=i.height,f=o?4:3,l=t.props.groupable,p=ii(t.state,e),h=l?a:0,d=l?s:0,v=ri(n,p,u,c,f,r);return me(v,[h,d])}function ai(t,e,r,n,i,o){var a=t.props.groupable,s=t.state,u=s.transformOrigin,c=s.targetMatrix,f=s.offsetMatrix,l=s.is3d,p=s.width,h=s.height,d=s.left,v=s.top,g=l?4:3,m=Kn(o,e,r,p,h,u),b=a?d:0,y=a?v:0,x=ni(f,c,m,g),E=ri(i,x,e,r,g,n);return me(E,[b,y])}function si(t,e){if(!e[0]&&!e[1])return[0,0];var r=t.props.baseDirection,n=void 0===r?[-1,-1]:r;return[e[0]?e[0]:-1*n[0],e[1]?e[1]:-1*n[1]]}function ui(t,e){return ei(sn(t.state),e)}function ci(t){return t.isRequest?t.parentDirection:F(t.inputEvent.target,Pr("direction"))}function fi(t,e,r,n,i,o){var a=i[0],s=i[1],u=o[0],c=o[1],f=[],l=n?0:1,p="vertical"===e?"horizontal":"vertical",h=Sn(t.filter((function(t){var r=t.type;return r===e})),(function(t){var e=t.element;return e})).map((function(t){return t[0]})).filter((function(t){var e=t.pos,r=t.sizes;return e[l]<=c&&u<=e[l]+r[l]}));return h.forEach((function(t){var e=t.pos[n],i=e+t.sizes[n];h.forEach((function(t){var o=t.pos,u=t.sizes,c=t.element,l=o[n],d=l+u[n],v=0,g=0,m=!0;if(i<=l)g=i-l,v=d-g,a<v-r&&(m=!1);else{if(!(d<=e))return;g=e-d,v=l-g,s>v+r&&(m=!1)}if(m&&f.push({pos:"vertical"===p?[v,o[1]]:[o[0],v],element:c,sizes:u,size:0,type:p,gap:g,gapGuidelines:h}),i<=a&&s<=l){var b=(l+i-(s-a))/2;cn(a-(b-r),.1)>=0&&f.push({pos:"vertical"===p?[b,o[1]]:[o[0],b],element:c,sizes:u,size:0,type:p,gap:i-a,gapGuidelines:h})}}))})),f}function li(t){var e=t.state,r=e.guidelines,n=e.containerClientRect,i=n.scrollHeight,o=n.scrollWidth,a=t.props,s=a.snapHorizontal,u=void 0===s||s,c=a.snapVertical,f=void 0===c||c,l=a.snapGap,p=void 0===l||l,h=a.verticalGuidelines,d=a.horizontalGuidelines,v=a.snapThreshold,g=void 0===v?5:v,m=r.slice();if(p){var b=Hr(sn(t.state)),y=b.top,x=b.left,E=b.bottom,S=b.right,M=r.filter((function(t){var e=t.element;return e}));m.push.apply(m,fi(M,"horizontal",g,0,[x,S],[y,E]).concat(fi(M,"vertical",g,1,[y,E],[x,S])))}return u&&d&&d.forEach((function(t){m.push({type:"horizontal",pos:[0,cn(t,.1)],size:o})})),f&&h&&h.forEach((function(t){m.push({type:"vertical",pos:[cn(t,.1),0],size:i})})),m}function pi(t,e,r,n,i){var o=li(t),a=t.props,s=a.snapElement,u=void 0===s||s,c=En(i,a.snapThreshold,5);return{vertical:gi(o,"vertical",e,c,n,u),horizontal:gi(o,"horizontal",r,c,n,u)}}function hi(t,e,r){var n=r[0],i=r[1],o=e[0],a=e[1],s=me(r,e),u=s[0],c=s[1],f=c>0,l=u>0;u=Math.abs(u)<=xr?0:u,c=Math.abs(c)<=xr?0:c;var p={isSnap:!1,offset:0,pos:0},h={isSnap:!1,offset:0,pos:0};if(0===u&&0===c)return{vertical:p,horizontal:h};var d=pi(t,u?[n]:[],c?[i]:[]),v=d.vertical,g=d.horizontal;v.posInfos.filter((function(t){var e=t.pos;return l?e>=o:e<=o})),g.posInfos.filter((function(t){var e=t.pos;return f?e>=a:e<=a})),v.isSnap=v.posInfos.length>0,g.isSnap=g.posInfos.length>0;var m=vi(v),b=m.isSnap,y=m.guideline,x=vi(g),E=x.isSnap,S=x.guideline,M=E?S.pos[1]:0,w=b?y.pos[0]:0;if(0===u)E&&(h.isSnap=!0,h.pos=S.pos[1],h.offset=i-h.pos);else if(0===c)b&&(p.isSnap=!0,p.pos=w,p.offset=n-w);else{var D=c/u,C=r[1]-D*n,O=0,P=0,R=!1;b?(P=w,O=D*P+C,R=!0):E&&(O=M,P=(O-C)/D,R=!0),R&&(p.isSnap=!0,p.pos=P,p.offset=n-P,h.isSnap=!0,h.pos=O,h.offset=i-O)}return{vertical:p,horizontal:h}}function di(t,e,r,n){var i=t.props.snapCenter,o=i&&r,a=["left","right"],s=["top","bottom"];return o&&(a.push("center"),s.push("middle")),a=a.filter((function(t){return t in e})),s=s.filter((function(t){return t in e})),pi(t,a.map((function(t){return e[t]})),s.map((function(t){return e[t]})),o,n)}function vi(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],n=r.guidelineInfos[0],i=n.offset,o=n.dist,a=n.guideline;return{isSnap:e,offset:i,dist:o,pos:r.pos,guideline:a}}function gi(t,e,r,n,i,o){if(!t||!t.length)return{isSnap:!1,posInfos:[]};var a="vertical"===e,s=a?0:1,u=r.map((function(r){var a=t.map((function(t){var e=t.pos,n=r-e[s];return{offset:n,dist:Math.abs(n),guideline:t}})).filter((function(t){var r=t.guideline,a=t.dist,s=r.type,u=r.center,c=r.element;return!(!o&&c||!i&&u||s!==e||a>n)})).sort((function(t,e){return t.dist-e.dist}));return{pos:r,guidelineInfos:a}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist}));return{isSnap:u.length>0,posInfos:u}}function mi(t,e,r){var n=[];if(r[0]&&r[1])n=[r,[-r[0],r[1]],[r[0],-r[1]]].map((function(t){return Qn(e,t)}));else if(r[0]||r[1])t.props.keepRatio?n=[[-1,-1],[-1,1],[1,-1],[1,1],r].map((function(t){return Qn(e,t)})):(n=Jn(e,r),n.length>1&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]));else for(var i=[e[0],e[1],e[3],e[2],e[0]],o=0;o<4;++o)n.push(i[o]),n.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return pi(t,n.map((function(t){return t[0]})),n.map((function(t){return t[1]})),!0,1)}function bi(t,e){return t.slice().sort((function(t,r){var n=t.sign[e],i=r.sign[e],o=t.offset[e],a=r.offset[e],s=Math.abs(o),u=Math.abs(a);return n?i?t.isBound&&r.isBound?u-s:t.isBound?-1:r.isBound?1:t.isSnap&&r.isSnap?s-u:t.isSnap?-1:r.isSnap||s<xr?1:u<xr?-1:s-u:-1:1}))[0]}function yi(t,e){var r=ve(e[0][0],e[1][0]),n=ve(e[0][1],e[1][1]);return{vertical:r<=t[0],horizontal:n<=t[1]}}function xi(t,e){var r,n,i=e[0],o=e[1],a=o[0]-i[0],s=o[1]-i[1];if(Math.abs(a)<xr&&(a=0),Math.abs(s)<xr&&(s=0),a)if(s){var u=s/a;r=u*(t[0]-i[0])+i[1],n=t[1]}else r=i[1],n=t[1];else r=i[0],n=t[0];return r-n}function Ei(t,e,r){void 0===r&&(r=xr);var n=xi(t[0],e)<=0;return t.slice(1).every((function(t){var i=xi(t,e),o=i<=0;return o===n||Math.abs(i)<=r}))}function Si(t,e,r,n,i){return void 0===i&&(i=0),n&&e-i<=t||!n&&t<=r+i?{isBound:!0,offset:n?e-t:r-t}:{isBound:!1,offset:0}}function Mi(t,e,r){var n=t.props.innerBounds;if(!n)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=n.left,o=n.top,a=n.width,s=n.height,u=[[i,o],[i,o+s]],c=[[i,o],[i+a,o]],f=[[i+a,o],[i+a,o+s]],l=[[i,o+s],[i+a,o+s]],p=yi(r,e),h=p.horizontal,d=p.vertical;if(Ei([r,[i,o],[i+a,o],[i,o+s],[i+a,o+s]],e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var v=wi(e,c,d),g=wi(e,l,d),m=wi(e,u,h),b=wi(e,f,h),y=v.isBound&&g.isBound,x=v.isBound||g.isBound,E=m.isBound&&b.isBound,S=m.isBound||b.isBound,M=Dn(v.offset,g.offset),w=Dn(m.offset,b.offset),D=[0,0],C=!1,O=!1;return Math.abs(w)<Math.abs(M)?(D=[M,0],C=x,O=y):(D=[0,w],C=S,O=E),{isAllBound:O,isVerticalBound:x,isHorizontalBound:S,isBound:C,offset:D}}function wi(t,e,r,n){var i=t[0],o=t[1],a=e[0],s=e[1],u=o[1]-i[1],c=o[0]-i[0],f=s[1]-a[1],l=s[0]-a[0];if(l){if(!f&&u){var p=u/c,h=c?(a[1]-i[1])/p+i[0]:i[0];return Si(h,a[0],s[0],r,n)}}else if(c){var d=u?u/c*(a[0]-i[0])+i[1]:i[1];return Si(d,a[1],s[1],r,n)}return{isBound:!1,offset:0}}function Di(t,e,r,n){return e.map((function(e){var i=e[0],o=e[1],a=e[2],s=Mi(t,[o,a],r),u=s.isBound,c=s.offset,f=s.isVerticalBound,l=s.isHorizontalBound,p=Un({datas:n,distX:c[0],distY:c[1]}).map((function(t,e){return t*(i[e]?2/i[e]:0)}));return{sign:i,isBound:u,isVerticalBound:f,isHorizontalBound:l,isSnap:!1,offset:p}}))}function Ci(t,e,r){var n,i=Pi(e,[0,0],!1).map((function(t){var e=t[0],r=t[1],n=t[2];return[e.map((function(t){return 2*Math.abs(t)})),r,n]})),o=Di(t,i,Qn(e,[0,0]),r),a=bi(o,0),s=bi(o,1),u=0,c=0,f=a.isVerticalBound||s.isVerticalBound,l=a.isHorizontalBound||s.isHorizontalBound;return(f||l)&&(n=$n({datas:r,distX:-a.offset[0],distY:-s.offset[1]}),u=n[0],c=n[1]),{vertical:{isBound:f,offset:u},horizontal:{isBound:l,offset:c}}}function Oi(t,e){var r=[],n=t[0],i=t[1];return n&&i?r.push([[0,2*i],t,[-n,i]],[[2*n,0],t,[n,-i]]):n?(r.push([[2*n,0],[n,1],[n,-1]]),e&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):i?(r.push([[0,2*i],[1,i],[-1,i]]),e&&r.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function Pi(t,e,r){return Oi(e,r).map((function(e){var r=e[0],n=e[1],i=e[2];return[r,Qn(t,n),Qn(t,i)]}))}function Ri(t,e,r,n){var i=n?t.map((function(t){return ye(t,n)})):t,o=[r].concat(e);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some((function(t,e){return!Ei(o,t)}))}function zi(t){var e=t[0],r=t[1],n=r[0]-e[0],i=r[1]-e[1];if(!n)return Math.abs(e[0]);if(!i)return Math.abs(e[1]);var o=i/n;return Math.abs((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}function Bi(t){var e=t[0],r=t[1],n=r[0]-e[0],i=r[1]-e[1];if(!n)return[e[0],0];if(!i)return[0,e[1]];var o=i/n,a=-o*e[0]+e[1];return[-a/(o+1/o),a/(o*o+1)]}function _i(t,e,r,n,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,c=o.width,f=o.height,l=s-n[0],p=s+c-n[0],h=u-n[1],d=u+f-n[1],v=[[l,h],[p,h],[l,d],[p,d]],g=Qn(r,[0,0]);if(!Ri(r,v,g,0))return[];var m=[],b=v.map((function(t){return[Ur(t),ue([0,0],t)]}));return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach((function(t){var r=ue([0,0],Bi(t)),n=zi(t);m.push.apply(m,b.filter((function(t){var e=t[0];return e&&n<=e})).map((function(t){var e=t[0],i=t[1],o=Math.acos(e?n/e:0),s=i+o,u=i-o;return[a+s-r,a+u-r]})).reduce((function(t,e){return t.push.apply(t,e),t}),[]).filter((function(t){return!Ri(e,v,g,t)})).map((function(t){return cn(180*t/Math.PI,xr)})))})),m}function Gi(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var r=t.getRect(),n=r.pos1,i=r.pos2,o=r.pos3,a=r.pos4,s=[n,i,o,a],u=Qn(s,[0,0]),c=e.left,f=e.top,l=e.width,p=e.height,h=[[c,f],[c,f+p]],d=[[c,f],[c+l,f]],v=[[c+l,f],[c+l,f+p]],g=[[c,f+p],[c+l,f+p]],m=[[n,i],[i,a],[a,o],[o,n]],b=[],y=[],x={top:!1,bottom:!1,left:!1,right:!1};return m.forEach((function(t){var e=yi(u,t),r=e.horizontal,n=e.vertical,i=wi(t,d,n,1),o=wi(t,g,n,1),a=wi(t,h,r,1),s=wi(t,v,r,1);i.isBound&&!x.top&&(b.push(f),x.top=!0),o.isBound&&!x.bottom&&(b.push(f+p),x.bottom=!0),a.isBound&&!x.left&&(y.push(c),x.left=!0),s.isBound&&!x.right&&(y.push(c+l),x.right=!0)})),{horizontal:b,vertical:y}}function Ti(t,e,r){var n=t.props.bounds||{},i=n.left,o=void 0===i?-1/0:i,a=n.top,s=void 0===a?-1/0:a,u=n.right,c=void 0===u?1/0:u,f=n.bottom,l=void 0===f?1/0:f,p={left:o,top:s,right:c,bottom:l};return{vertical:ji(p,e,!0),horizontal:ji(p,r,!1)}}function Ai(t,e,r){var n=t.props.bounds||{},i=n.left,o=void 0===i?-1/0:i,a=n.top,s=void 0===a?-1/0:a,u=n.right,c=void 0===u?1/0:u,f=n.bottom,l=void 0===f?1/0:f,p=r[0],h=r[1],d=me(r,e),v=d[0],g=d[1];Math.abs(v)<xr&&(v=0),Math.abs(g)<xr&&(g=0);var m=g>0,b=v>0,y={isBound:!1,offset:0,pos:0},x={isBound:!1,offset:0,pos:0};if(0===v&&0===g)return{vertical:y,horizontal:x};if(0===v)m?l<h&&(x.pos=l,x.offset=h-l):s>h&&(x.pos=s,x.offset=h-s);else if(0===g)b?c<p&&(y.pos=c,y.offset=p-c):o>p&&(y.pos=o,y.offset=p-o);else{var E=g/v,S=r[1]-E*p,M=0,w=0,D=!1;b&&c<=p?(M=E*c+S,w=c,D=!0):!b&&p<=o&&(M=E*o+S,w=o,D=!0),D&&(M<s||M>l)&&(D=!1),D||(m&&l<=h?(M=l,w=(M-S)/E,D=!0):!m&&h<=s&&(M=s,w=(M-S)/E,D=!0)),D&&(y.isBound=!0,y.pos=w,y.offset=p-w,x.isBound=!0,x.pos=M,x.offset=h-M)}return{vertical:y,horizontal:x}}function ji(t,e,r){var n=t[r?"left":"top"],i=t[r?"right":"bottom"],o=Math.min.apply(Math,e),a=Math.max.apply(Math,e);return n+1>o?{isBound:!0,offset:o-n,pos:n}:i-1<a?{isBound:!0,offset:a-i,pos:i}:{isBound:!1,offset:0,pos:0}}function Ni(t,e,r){var n=r?t.map((function(t){return ye(t,r)})):t;return n.some((function(t){return t[0]<e.left&&Math.abs(t[0]-e.left)>.1||t[0]>e.right&&Math.abs(t[0]-e.right)>.1||t[1]<e.top&&Math.abs(t[1]-e.top)>.1||t[1]>e.bottom&&Math.abs(t[1]-e.bottom)>.1}))}function Ii(t,e,r){var n=Ur(t),i=Math.sqrt(n*n-e*e)||0;return[i,-i].sort((function(e,n){return Math.abs(e-t[r?0:1])-Math.abs(n-t[r?0:1])})).map((function(t){return ue([0,0],r?[t,e]:[e,t])}))}function ki(t,e,r,n,i){var o=t.props.bounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=void 0===s?-1/0:s,c=o.top,f=void 0===c?-1/0:c,l=o.right,p=void 0===l?1/0:l,h=o.bottom,d=void 0===h?1/0:h,v=u-n[0],g=p-n[0],m=f-n[1],b=d-n[1],y={left:v,top:m,right:g,bottom:b};if(!Ni(r,y,0))return[];var x=[];return[[v,0],[g,0],[m,1],[b,1]].forEach((function(t,n){var i=t[0],o=t[1];r.forEach((function(t){var r=ue([0,0],t);x.push.apply(x,Ii(t,i,o).map((function(t){return a+t-r})).filter((function(t){return!Ni(e,y,t)})).map((function(t){return cn(180*t/Math.PI,xr)})))}))})),x}function Xi(t,e,r){var n=Wr(t,[e.clientLeft,e.clientTop],r);return[e.left+n[0],e.top+n[1]]}function Yi(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var r=t.props,n=r.horizontalGuidelines,i=void 0===n?[]:n,o=r.verticalGuidelines,a=void 0===o?[]:o,s=r.elementGuidelines,u=void 0===s?[]:s,c=r.bounds,f=r.snapCenter;if(c||i.length||a.length||u.length){var l=e.containerClientRect,p=e.targetClientRect,h=p.top,d=p.left,v=e.rootMatrix,g=e.is3d,m=g?4:3,b=Xi(v,l,m),y=b[0],x=b[1],E=sn(e),S=Math.min.apply(Math,E.map((function(t){return t[0]}))),M=Math.min.apply(Math,E.map((function(t){return t[1]}))),w=me([S,M],On(v,[d-y,h-x],m)).map((function(t){return un(t)})),D=w[0],C=w[1],O=[];u.forEach((function(t){var e=t.getBoundingClientRect(),r=e.left-y,n=e.top-x,i=n+e.height,o=r+e.width,a=On(v,[r,n],m),s=a[0],u=a[1],c=On(v,[o,i],m),l=c[0],p=c[1],h=l-s,d=p-u,g=[h,d];O.push({type:"vertical",element:t,pos:[cn(s+D,.1),u],size:d,sizes:g}),O.push({type:"vertical",element:t,pos:[cn(l+D,.1),u],size:d,sizes:g}),O.push({type:"horizontal",element:t,pos:[s,cn(u+C,.1)],size:h,sizes:g}),O.push({type:"horizontal",element:t,pos:[s,cn(p+C,.1)],size:h,sizes:g}),f&&(O.push({type:"vertical",element:t,pos:[cn((s+l)/2+D,.1),u],size:d,sizes:g,center:!0}),O.push({type:"horizontal",element:t,pos:[s,cn((u+p)/2+C,.1)],size:h,sizes:g,center:!0}))})),e.guidelines=O,e.enableSnap=!0}}}function Wi(t,e){var r=t.props,n=r.snappable,i=r.bounds,o=r.verticalGuidelines,a=r.horizontalGuidelines,s=t.state,u=s.guidelines,c=s.enableSnap;return!(!n||!c||e&&!0!==n&&n.indexOf(e)<0)&&!!(i||u&&u.length||o&&o.length||a&&a.length)}function qi(t,e,r,n,i){var o=oo(t,e,r,n);if(!o)return[0,0];var a=Un({datas:i,distX:o[0],distY:o[1]}),s=a[0],u=a[1];return[s,u]}function Hi(t,e,r,n,i,o){var a=qr(t,e,r,o?4:3),s=ti(a,i);return an(a,me(n,s))}function Li(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Fi(t,e){return t.isBound?t.offset:e.isSnap?vi(e).offset:0}function Vi(t,e,r,n){var i=Ai(t,e,r),o=i.horizontal,a=i.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:hi(t,e,r),u=s.horizontal,c=s.vertical,f=Li(o,u),l=Li(a,c),p=Math.abs(f),h=Math.abs(l);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:f,dist:p},vertical:{isBound:a.isBound,isSnap:c.isSnap,offset:l,dist:h}}}function Ui(t,e,r,n){void 0===n&&(n=r);var i=Ti(t,n.map((function(t){return t[0]})),n.map((function(t){return t[1]}))),o=i.horizontal,a=i.vertical,s=e?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:pi(t,r.map((function(t){return t[0]})),r.map((function(t){return t[1]}))),u=s.horizontal,c=s.vertical,f=Fi(o,u),l=Fi(a,c),p=Math.abs(f),h=Math.abs(l);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:f,dist:p},vertical:{isBound:a.isBound,isSnap:c.isSnap,offset:l,dist:h}}}function $i(t){return t?t/Math.abs(t):0}function Ki(t,e,r,n,i){var o=[-r[0],-r[1]],a=t.state,s=a.width,u=a.height,c=t.props.bounds,f=1/0,l=1/0;if(c){var p=[[r[0],-r[1]],[-r[0],r[1]]],h=c.left,d=void 0===h?-1/0:h,v=c.top,g=void 0===v?-1/0:v,m=c.right,b=void 0===m?1/0:m,y=c.bottom,x=void 0===y?1/0:y;p.forEach((function(t){var r=t[0]!==o[0],a=t[1]!==o[1],c=Qn(e,t),p=$i(t[1]-o[1]),h=$i(t[0]-o[0]),v=360*ue(n,c)/Math.PI;if(a){var m=c.slice();(Math.abs(v-360)<2||Math.abs(v-180)<2)&&(m[1]=n[1]);var y=qi(n,m,(n[1]<c[1]?x:g)-c[1],!1,i),E=y[1];isNaN(E)||(l=u+p*E)}if(r){m=c.slice();(Math.abs(v-90)<2||Math.abs(v-270)<2)&&(m[0]=n[0]);var S=qi(n,m,(n[0]<c[0]?b:d)-c[0],!0,i)[0];isNaN(S)||(f=s+h*S)}}))}return{maxWidth:f,maxHeight:l}}function Zi(t,e,r,n,i,o){return r.map((function(r){var a=r[0],s=r[1],u=Qn(e,a),c=Qn(e,s),f=n?Vi(t,u,c,i):Ui(t,i,[c]),l=f.horizontal,p=l.dist,h=l.offset,d=l.isBound,v=l.isSnap,g=f.vertical,m=g.dist,b=g.offset,y=g.isBound,x=g.isSnap,E=me(s,a);if(!b&&!h)return{isBound:y||d,isSnap:x||v,sign:E,offset:[0,0]};var S=p<m,M=qi(u,c,-(S?b:h),S,o).map((function(t,e){return t*(E[e]?2/E[e]:0)}));return{sign:E,isBound:S?y:d,isSnap:S?x:v,offset:M}}))}function Ji(t,e){var r=[],n=[-t[0],-t[1]];return t[0]&&t[1]?(r.push([n,[t[0],-t[1]]],[n,[-t[0],t[1]]]),e&&r.push([n,t])):t[0]?e?r.push([n,[n[0],-1]],[n,[n[0],1]],[n,[t[0],-1]],[n,t],[n,[t[0],1]]):r.push([[n[0],-1],[t[0],-1]],[[n[0],0],[t[0],0]],[[n[0],1],[t[0],1]]):t[1]?e?r.push([n,[-1,n[1]]],[n,[1,n[1]]],[n,[-1,t[1]]],[n,[1,t[1]]],[n,t]):r.push([[-1,n[1]],[-1,t[1]]],[[0,n[1]],[0,t[1]]],[[1,n[1]],[1,t[1]]]):r.push([n,[1,0]],[n,[-1,0]],[n,[0,-1]],[n,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),r}function Qi(t,e,r,n,i,o){var a=Ji(r,n),s=Pi(e,r,n),u=Zi(t,e,a,n,i,o).concat(Di(t,s,Qn(e,[0,0]),o)),c=bi(u,0),f=bi(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}function to(t,e,r,n,i,o,a,s,u){var c=Qn(e,a),f=Ui(t,s,[c]),l=f.horizontal.offset,p=f.vertical.offset;if(p||l){var h=Un({datas:u,distX:-p,distY:-l}),d=h[0],v=h[1],g=Math.min(i||1/0,r+a[0]*d),m=Math.min(o||1/0,n+a[1]*v);return[g-r,m-n]}return[0,0]}function eo(t,e,r,n,i,o,a,s){for(var u=sn(t.state),c=t.props.keepRatio,f=0,l=0,p=0;p<2;++p){var h=e(f,l),d=Qi(t,h,i,c,a,s),v=d.width,g=d.height,m=v.isBound,b=g.isBound,y=v.offset,x=g.offset;if(1===p&&(m||(y=0),b||(x=0)),0===p&&a&&!m&&!b)return[0,0];if(c){var E=Math.abs(y)*(r?1/r:1),S=Math.abs(x)*(n?1/n:1),M=m&&b?E<S:b||!m&&E<S;M?y=r*x/n:x=n*y/r}f+=y,l+=x}if(i[0]&&i[1]){var w=Ki(t,u,i,o,s),D=w.maxWidth,C=w.maxHeight,O=to(t,e(f,l),r+f,n+l,D,C,i,a,s);y=O[0],x=O[1];f+=y,l+=x}return[f,l]}function ro(t,e,r,n){if(!Wi(t,"rotatable"))return n;var i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,u=n*Math.PI/180,c=[i,o,a,s].map((function(t){return me(t,r)})),f=c.map((function(t){return ye(t,u)})),l=ki(t,c,f,r,n).concat(_i(t,c,f,r,n));return l.sort((function(t,e){return Math.abs(t-n)-Math.abs(e-n)})),l.length?l[0]:n}function no(t,e,r,n,i,o,a){if(!Wi(t,"resizable"))return[0,0];var s=t.state,u=s.matrix,c=s.is3d;return eo(t,(function(t,o){return Hi(u,e+t,r+o,i,n,c)}),e,r,n,i,o,a)}function io(t,e,r,n,i,o){var a=o.width,s=o.height;if(!Wi(t,"scalable"))return[0,0];var u=o.is3d,c=eo(t,(function(t,i){return Hi(ii(o,ge(e,[t/a,i/s])),a,s,n,r,u)}),a,s,r,n,i,o);return[c[0]/a,c[1]/s]}function oo(t,e,r,n){var i=e[0]-t[0],o=e[1]-t[1];if(Math.abs(i)<xr&&(i=0),Math.abs(o)<xr&&(o=0),!i)return n?[0,0]:[0,r];if(!o)return n?[r,0]:[0,0];var a=o/i,s=t[1]-a*t[0];if(n){var u=a*(e[0]+r)+s;return[r,u-e[1]]}var c=(e[1]+r-s)/a;return[c-e[0],r]}function ao(t,e){e.absolutePoses=sn(t.state)}function so(t,e,r,n,i){var o=e[0],a=e[1],s=r[0],u=r[1],c=n[0],f=n[1],l=i[0],p=i[1],h=-l,d=-p;if(t&&o&&a){h=0,d=0;var v=[];if(s&&u?v.push([0,p],[l,0]):s?v.push([l,0]):u?v.push([0,p]):c&&f?v.push([0,p],[l,0]):c?v.push([l,0]):f&&v.push([0,p]),v.length){v.sort((function(t,e){return Ur(me([o,a],t))-Ur(me([o,a],e))}));var g=v[0];if(g[0]&&Math.abs(o)>xr)h=-g[0],d=a*Math.abs(o+h)/Math.abs(o)-a;else if(g[1]&&Math.abs(a)>xr){var m=a;d=-g[1],h=o*Math.abs(a+d)/Math.abs(m)-o}if(t&&u&&s)if(Math.abs(h)>xr&&Math.abs(h)<Math.abs(l)){var b=Math.abs(l)/Math.abs(h);h*=b,d*=b}else if(Math.abs(d)>xr&&Math.abs(d)<Math.abs(p)){b=Math.abs(p)/Math.abs(d);h*=b,d*=b}else h=Dn(-l,h),d=Dn(-p,d)}}else h=o||s?-l:0,d=a||u?-p:0;return[h,d]}function uo(t,e,r,n,i,o){if(!Wi(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=an(o.absolutePoses,[e,r]),s=Hr(a),u=s.left,c=s.right,f=s.top,l=s.bottom,p=t.props.snapCenter,h=[[u,f],[c,f],[u,l],[c,l]];p&&h.push([(u+c)/2,(f+l)/2]);var d=Ui(t,i,h,a),v=d.vertical,g=d.horizontal,m=Ci(t,a,o),b=m.vertical,y=m.horizontal,x=v.isSnap,E=g.isSnap,S=v.isBound||b.isBound,M=g.isBound||y.isBound,w=Dn(v.offset,b.offset),D=Dn(g.offset,y.offset),C=so(n,[e,r],[S,M],[x,E],[w,D]),O=C[0],P=C[1];return[{isBound:S,isSnap:x,offset:O},{isBound:M,isSnap:E,offset:P}]}function co(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var r=t.guideline;e.indexOf(r)>-1||e.push(r)}))})),e}function fo(t,e,r,n){var i=t-r,o=i<0?i+e:n,a=i<0?0:i,s=a-o;return{size:s,pos:o}}function lo(t,e,r,n){var i=[],o=Sn(t.filter((function(t){var e=t.element,r=t.gap;return e&&!r})),(function(t){var r=t.element,o=t.pos,a=o[n],s=Math.min(0,a-e)<0?-1:1,u=s+"_"+o[n?0:1],c=L(i,(function(t){var e=t[0],n=t[1];return r===e&&a===n}));return c?c[2]:(i.push([r,a,u]),u)}));return o.forEach((function(t){t.sort((function(t,i){var o=fo(t.pos[n],t.size,e,r).size-fo(i.pos[n],t.size,e,r).size;return o||t.pos[n?0:1]-i.pos[n?0:1]}))})),o}function po(t,e,r,n,i,o,a,s,u,c,f,l){var p=e[0],h=e[1],d=e[2],v=e[3];return wn(t.map((function(t,e){var g=!0;return t.map((function(t,m){var b,y=t.pos,x=t.size,E=fo(y[c],x,n,i),S=E.pos,M=E.size;if(M<a)return null;var w=g;g=!1;var D=s&&w?parseFloat(M.toFixed(u)):0;return l.createElement("div",{className:Pr("line",p,"guideline","dashed"),"data-size":D>0?f(D):"",key:p+"LinkGuidline"+e+"-"+m,style:(b={},b[h]=r+S+"px",b[d]=-o+y[c?0:1]+"px",b[v]=M+"px",b)})}))})))}function ho(t,e,r,n,i,o){var a=e[0],s=e[1],u=e[2],c=e[3];return t.map((function(t,e){var f;return o.createElement("div",{className:Pr("line",a,"guideline","target","bold"),key:a+"TargetGuidline"+e,style:(f={},f[s]=r+"px",f[u]=-n+t+"px",f[c]=i+"px",f)})}))}function vo(t,e,r,n,i,o){var a=e[0],s=e[1],u=e[2],c=e[3];return t.map((function(t,e){var f,l=t.pos,p=t.size,h=t.element;return o.createElement("div",{className:Pr("line",a,"guideline",h?"bold":""),key:a+"Guidline"+e,style:(f={},f[s]=-r+l[i]+"px",f[u]=-n+l[i?0:1]+"px",f[c]=p+"px",f)})}))}function go(t,e,r,n,i,o,a){var s=Math.abs(o),u=i[e]+(o>0?n[0]:0);return t.filter((function(t){var n=t.pos;return n[e]<=r[e]})).sort((function(t,r){var n=t.pos,i=r.pos;return i[e]-n[e]})).filter((function(t){var r=t.pos,n=t.sizes,i=r[e];return cn(i+n[e],1e-4)===cn(u-s,1e-4)&&(u=i,!0)})).map((function(t){var n=-r[e]+t.pos[e]+t.sizes[e];return pr({},t,{gap:o,renderPos:e?[a,n]:[n,a]})}))}function mo(t,e,r,n,i,o,a){var s=Math.abs(o),u=i[e]+(o<0?n[e]:0);return t.filter((function(t){var n=t.pos;return n[e]>r[e]})).sort((function(t,r){var n=t.pos,i=r.pos;return n[e]-i[e]})).filter((function(t){var r=t.pos,n=t.sizes,i=r[e];return cn(i,1e-4)===cn(u+s,1e-4)&&(u=i+n[e],!0)})).map((function(t){var n=-r[e]+t.pos[e]-s;return pr({},t,{gap:o,renderPos:e?[a,n]:[n,a]})}))}function bo(t,e,r,n){var i=t.filter((function(t){var r=t.element,n=t.gap,i=t.type;return r&&n&&i===e})),o="vertical"===e?[0,1]:[1,0],a=o[0],s=o[1];return wn(i.map((function(t,e){var i=t.pos,o=t.gap,u=t.gapGuidelines,c=t.sizes,f=Cn(i[s]+c[s]-r[s],i[s]-r[s]-n[s]),l=Math.min(c[s],n[s]);f>0&&f>l?f=2*(f-l/2):f<0&&f<-l&&(f=2*(f+l/2));var p=(f>0?0:n[s])+f/2;return go(u,a,r,n,i,o,p).concat(mo(u,a,r,n,i,o,p))})))}function yo(t,e,r,n,i,o){var a=n[0],s=n[1],u=n[2],c=n[3],f=t.props,l=f.snapDigit,p=void 0===l?0:l,h=f.isDisplaySnapDigit,d=void 0===h||h,v="vertical"===r?"horizontal":"vertical",g="vertical"===r?[0,1]:[1,0],m=g[0],b=g[1];return e.map((function(t,e){var r,n=t.renderPos,f=t.gap,l=Math.abs(f),h=d?parseFloat(l.toFixed(p)):0;return o.createElement("div",{className:Pr("line",a,"guideline","gap"),"data-size":h>0?i(h):"",key:v+"GapGuideline"+e,style:(r={},r[s]=n[m]+"px",r[u]=n[b]+"px",r[c]=l+"px",r)})}))}function xo(t,e,r,n,i){var o=Ti(t,e,r),a=o.vertical,s=a.isBound,u=a.pos,c=o.horizontal,f=c.isBound,l=c.pos;s&&n.indexOf(u)<0&&n.push(u),f&&i.indexOf(l)<0&&i.push(l);var p=Gi(t),h=p.vertical,d=p.horizontal;n.push.apply(n,h.filter((function(t){return n.indexOf(t)<0}))),i.push.apply(i,d.filter((function(t){return i.indexOf(t)<0})))}var Eo={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object},render:function(t,e){var r=t.state,n=r.top,i=r.left,o=r.pos1,a=r.pos2,s=r.pos3,u=r.pos4,c=r.snapRenderInfo,f=r.targetClientRect,l=r.containerClientRect,p=r.is3d,h=r.rootMatrix;if(!c||!Wi(t,""))return[];var d=p?4:3,v=Math.min(o[0],a[0],s[0],u[0]),g=Math.min(o[1],a[1],s[1],u[1]),m=Xi(h,l,d),b=On(h,[f.left-m[0],f.top-m[1]],d),y=b[0],x=b[1],E=t.props,S=E.snapThreshold,M=void 0===S?5:S,w=E.snapDigit,D=void 0===w?0:w,C=E.isDisplaySnapDigit,O=void 0===C||C,P=E.snapDistFormat,R=void 0===P?function(t){return t}:P,z=sn(t.state),B=Hr(z),_=B.width,G=B.height,T=B.top,A=B.left,j=B.bottom,N=B.right,I=[],k=[],X=[],Y=[],W=[];if(!c.request){if(c.direction&&W.push(mi(t,z,c.direction)),c.snap){var q=Hr(z);c.center&&(q.middle=(q.top+q.bottom)/2,q.center=(q.left+q.right)/2),W.push(di(t,q,!0,1))}W.forEach((function(t){var e=t.vertical.posInfos,r=t.horizontal.posInfos;I.push.apply(I,e.map((function(t){return t.pos}))),k.push.apply(k,r.map((function(t){return t.pos}))),X.push.apply(X,co(e)),Y.push.apply(Y,co(r))}))}xo(t,[A,N],[T,j],I,k);var H=lo(Y,y,_,0),L=lo(X,x,G,1),F=["horizontal","left","top","width"],V=["vertical","top","left","height"],U=bo(X,"vertical",[i,n],[_,G]),$=bo(Y,"horizontal",[i,n],[_,G]),K=X.concat(Y);return vn(t,"onSnap",{guidelines:K.filter((function(t){var e=t.element;return!e})),elements:Sn(K.filter((function(t){var e=t.element;return e})),(function(t){var e=t.element;return e})),gaps:U.concat($)},!0),yo(t,U,"vertical",F,R,e).concat(yo(t,$,"horizontal",V,R,e),po(H,F,v,y,_,n,M,O,D,0,R,e),po(L,V,g,x,G,i,M,O,D,1,R,e),ho(k,F,v,n,_,e),ho(I,V,g,i,G,e),vo(Y,F,i,n,0,e),vo(X,V,n,i,1,e))},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Yi(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return ci(t)||Po(t)},dragControlStart:function(t,e){t.state.snapRenderInfo=null,Yi(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,e){t.state.snapRenderInfo=null,Yi(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null}},So={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number},render:function(t,e){var r=t.props.throttleDragRotate,n=t.state,i=n.dragInfo,o=n.beforeOrigin;if(r&&i){var a=i.dist;if(a[0]||a[1]){var s=Ur(a),u=ue(a,[0,0]);return e.createElement("div",{className:Pr("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:s+"px",transform:"translate("+o[0]+"px, "+o[1]+"px) rotate("+u+"rad)"}})}}},dragStart:function(t,e){var r=e.datas,n=e.parentEvent,i=e.parentDragger,o=t.state,a=o.targetTransform,s=o.target,u=o.dragger;if(u)return!1;o.dragger=i||t.targetDragger;var c=window.getComputedStyle(s);r.datas={},r.left=parseFloat(c.left||"")||0,r.top=parseFloat(c.top||"")||0,r.bottom=parseFloat(c.bottom||"")||0,r.right=parseFloat(c.right||"")||0,r.transform=a,r.startTranslate=[0,0],Vn(t,{datas:r}),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,ao(t,r);var f=dn(t,e,{set:function(t){r.startTranslate=t}}),l=n||vn(t,"onDragStart",f);return!1!==l?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.dragger=null,r.isPinch=!1),!!r.isDrag&&f},drag:function(t,e){var r=e.datas,n=e.parentEvent,i=e.parentFlag,o=e.isPinch,a=e.isRequest,s=e.distX,u=e.distY,c=r.isDrag,f=r.prevDist,l=r.prevBeforeDist,p=r.transform,h=r.startTranslate;if(c){var d=t.props,v=d.parentMoveable,g=n?0:d.throttleDrag||0,m=n?0:d.throttleDragRotate||0,b=!1,y=0;if(!n&&m>0&&(s||u)){var x=cn(180*ue([0,0],[s,u])/Math.PI,m),E=Ur([s,u]);y=x*Math.PI/180,s=E*Math.cos(y),u=E*Math.sin(y)}if(!o&&!n&&!i&&(s||u)){var S=uo(t,s,u,m,a,r),M=S[0],w=S[1],D=M.isSnap,C=M.isBound,O=M.offset,P=w.isSnap,R=w.isBound,z=w.offset;b=D||P||C||R,s+=O,u+=z}r.passDeltaX=s-(r.passDistX||0),r.passDeltaY=u-(r.passDistY||0),r.passDistX=s,r.passDistY=u;var B=ge(Un({datas:r,distX:s,distY:u},!0),h),_=ge(Un({datas:r,distX:s,distY:u},!1),h);m||b||(fn(_,g),fn(B,g));var G=me(B,h),T=me(_,h),A=me(T,f),j=me(G,l);r.prevDist=T,r.prevBeforeDist=G;var N=r.left+G[0],I=r.top+G[1],k=r.right-G[0],X=r.bottom-G[1],Y=p+" translate("+T[0]+"px, "+T[1]+"px)";if(t.state.dragInfo.dist=n?[0,0]:T,n||v||!A.every((function(t){return!t}))||!j.some((function(t){return!t}))){var W=dn(t,e,{transform:Y,dist:T,delta:A,translate:_,beforeDist:G,beforeDelta:j,beforeTranslate:B,left:N,top:I,right:k,bottom:X,isPinch:o});return!n&&vn(t,"onDrag",W),W}}},dragEnd:function(t,e){var r=e.parentEvent,n=e.datas,i=e.isDrag;if(t.state.dragger=null,t.state.dragInfo=null,n.isDrag)return n.isDrag=!1,!r&&vn(t,"onDragEnd",dn(t,e,{isDrag:i})),i},dragGroupStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var a=Ln(t,this,"dragStart",[n||0,i||0],e,!1),s=pr({},o,{targets:t.props.targets,events:a}),u=vn(t,"onDragGroupStart",s);return r.isDrag=!1!==u,!!r.isDrag&&o},dragGroup:function(t,e){var r=e.datas;if(r.isDrag){var n=this.drag(t,e),i=e.datas,o=i.passDeltaX,a=i.passDeltaY,s=Ln(t,this,"drag",[o,a],e,!1);if(n){var u=pr({targets:t.props.targets,events:s},n);return vn(t,"onDragGroup",u),u}}},dragGroupEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isDrag)return this.dragEnd(t,e),Ln(t,this,"dragEnd",[0,0],e,!1),vn(t,"onDragGroupEnd",dn(t,e,{targets:t.props.targets,isDrag:r})),r},request:function(t){var e={},r=t.getRect(),n=0,i=0;return{isControl:!1,requestStart:function(t){return{datas:e}},request:function(t){return"x"in t?n=t.x-r.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:n,distY:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Mo(t,e,r,n,i,o){var a=t.state.is3d?4:3,s=Wr(t.state.rootMatrix,i,a),u=ge([o.left,o.top],s);e.startAbsoluteOrigin=u,e.prevDeg=ue(u,[r,n])/Math.PI*180,e.prevSnapDeg=e.prevDeg,e.startDeg=e.prevDeg,e.loop=0}function wo(t,e,r,n,i,o){var a=r.prevDeg,s=o+n,u=ro(t,e,r.origin,n);r.prevDeg=u;var c=i*(u-a);return[c,u,s]}function Do(t,e,r,n,i,o,a,s){var u=r.prevDeg,c=r.prevSnapDeg,f=r.startDeg,l=r.loop;u>n&&u>270&&n<90?++r.loop:u<n&&u<90&&n>270&&--r.loop;var p=r.loop,h=360*l+c-f+o,d=360*p+n-f+o;r.prevDeg=d-360*p+f-o,d=cn(d,a);var v=i*(d-o);s&&(v=ro(t,e,r.origin,v),d=v/i+o),r.prevSnapDeg=d-360*p+f-o;var g=i*(d-h);return[g,v,d]}function Co(t,e,r,n,i,o,a,s){return Do(t,e,r,ue(r.startAbsoluteOrigin,[i,o])/Math.PI*180,n,a,s,!0)}function Oo(t,e){var r=e[0],n=e[1],i=e[2],o=e[3];return"left"===t?[i,r]:"right"===t?[n,o]:"bottom"===t?[o,i]:[r,n]}function Po(t){return!!t.isRequest||F(t.inputEvent.target,Pr("rotation"))}var Ro={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},render:function(t,e){var r=t.props,n=r.rotatable,i=r.rotationPosition;if(!n)return null;var o=t.state,a=o.renderPoses,s=o.direction,u=Oo(i,a),c=tn(u,s);return e.createElement("div",{key:"rotation",className:Pr("line rotation-line"),style:{transform:"translate(-50%) translate("+(u[0][0]+u[1][0])/2+"px, "+(u[0][1]+u[1][1])/2+"px) rotate("+c+"rad)"}},e.createElement("div",{className:Pr("control","rotation")}))},dragControlCondition:Po,dragControlStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.parentRotate,a=e.parentFlag,s=e.isPinch,u=e.isRequest,c=t.state,f=c.target,l=c.left,p=c.top,h=c.origin,d=c.beforeOrigin,v=c.direction,g=c.beforeDirection,m=c.targetTransform;if(!u&&!f)return!1;var b=t.getRect();if(r.rect=b,r.transform=m,r.left=l,r.top=p,u||s||a){var y=o||0;r.beforeInfo={origin:b.beforeOrigin,prevDeg:y,startDeg:y,prevSnapDeg:y,loop:0},r.afterInfo={origin:b.origin,prevDeg:y,startDeg:y,prevSnapDeg:y,loop:0}}else{r.beforeInfo={origin:b.beforeOrigin},r.afterInfo={origin:b.origin};var x=nn(t.controlBox.getElement());Mo(t,r.beforeInfo,n,i,d,x),Mo(t,r.afterInfo,n,i,h,x)}r.direction=v,r.beforeDirection=g,r.startRotate=0,r.datas={};var E=dn(t,e,{set:function(t){r.startRotate=t}}),S=vn(t,"onRotateStart",E);return r.isRotate=!1!==S,t.state.snapRenderInfo={request:e.isRequest},!!r.isRotate&&E},dragControl:function(t,e){var r,n,i,o,a,s,u=e.datas,c=e.clientX,f=e.clientY,l=e.parentRotate,p=e.parentFlag,h=e.isPinch,d=u.direction,v=u.beforeDirection,g=u.beforeInfo,m=u.afterInfo,b=u.isRotate,y=u.startRotate,x=u.rect;if(b){var E,S,M,w,D,C,O=t.props,P=O.throttleRotate,R=void 0===P?0:P,z=O.parentMoveable;if("parentDist"in e){var B=e.parentDist;r=wo(t,x,m,B,d,y),E=r[0],S=r[1],M=r[2],n=wo(t,x,g,B,d,y),w=n[0],D=n[1],C=n[2]}else h||p?(i=Do(t,x,m,l,d,y,R),E=i[0],S=i[1],M=i[2],o=Do(t,x,g,l,d,y,R),w=o[0],D=o[1],C=o[2]):(a=Co(t,x,m,d,c,f,y,R),E=a[0],S=a[1],M=a[2],s=Co(t,x,g,v,c,f,y,R),w=s[0],D=s[1],C=s[2]);if(E||w||z){var _=dn(t,e,{delta:E,dist:S,rotate:M,beforeDist:D,beforeDelta:w,beforeRotate:C,transform:u.transform+" rotate("+S+"deg)",isPinch:!!h});return vn(t,"onRotate",_),_}}},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isRotate&&(r.isRotate=!1,vn(t,"onRotateEnd",dn(t,e,{isDrag:n})),n)},dragGroupControlCondition:Po,dragGroupControlStart:function(t,e){var r=e.datas,n=e.inputEvent,i=t.state,o=i.left,a=i.top,s=i.beforeOrigin,u=this.dragControlStart(t,e);if(!u)return!1;u.set(t.rotation);var c=Fn(t,this,"dragControlStart",r,pr({},e,{parentRotate:0}),(function(t,e,r){var i=t.state,u=i.left,c=i.top,f=i.beforeOrigin,l=ge(me([u,c],[o,a]),me(f,s));e.prevClient=l,r.dragStart=So.dragStart(t,(new Hn).dragStart(l,n))})),f=pr({},u,{targets:t.props.targets,events:c}),l=vn(t,"onRotateGroupStart",f);return r.isRotate=!1!==l,!!r.isRotate&&u},dragGroupControl:function(t,e){var r=e.inputEvent,n=e.datas;if(n.isRotate){var i=this.dragControl(t,e);if(i){var o=i.beforeDist,a=i.beforeDelta,s=a/180*Math.PI,u=Fn(t,this,"dragControl",n,pr({},e,{parentRotate:o}),(function(t,n,i,o){var a=n.prevClient,u=a[0],c=a[1],f=ye([u,c],s),l=f[0],p=f[1],h=[l-u,p-c];n.prevClient=[l,p];var d=So.drag(t,qn(t.state,h,r,!!e.isPinch,!1));i.drag=d}));t.rotation=i.beforeRotate;var c=pr({targets:t.props.targets,events:u,set:function(e){t.rotation=e}},i);return vn(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isRotate){this.dragControlEnd(t,e),Fn(t,this,"dragControlEnd",n,e);var i=dn(t,e,{targets:t.props.targets,isDrag:r});return vn(t,"onRotateGroupEnd",i),r}},request:function(){var t={},e=0;return{isControl:!0,requestStart:function(e){return{datas:t}},request:function(r){return e+=r.deltaRotate,{datas:t,parentDist:e}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function zo(t,e,r){var n=t.state,i=n.renderPoses,o=n.rotation,a=t.props.renderDirections,s=void 0===a?e:a,u={};return s.forEach((function(t){u[t]=!0})),s.map((function(t){var e=Dr[t];if(!e||!u[t])return null;var n=(cn(o/Math.PI*180,15)+Cr[t])%180;return r.createElement("div",{className:Pr("control","direction",t),"data-rotation":n,"data-direction":t,key:"direction-"+t,style:Zr.apply(void 0,[o].concat(e.map((function(t){return i[t]}))))})}))}function Bo(t,e){return zo(t,wr,e)}function _o(t,e){return zo(t,["nw","ne","sw","se"],e)}var Go={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,baseDirection:Array,keepRatio:Boolean},render:function(t,e){var r=t.props,n=r.resizable,i=r.edge;if(n)return i?_o(t,e):Bo(t,e)},dragControlCondition:ci,dragControlStart:function(t,e){var r,n=e.inputEvent,i=e.isPinch,o=e.parentDirection,a=e.datas,s=e.parentFlag,u=o||(i?[0,0]:on(n.target)),c=t.state,f=c.target,l=c.width,p=c.height;if(!u||!f)return!1;!i&&Vn(t,{datas:a}),a.datas={},a.direction=u,a.startOffsetWidth=l,a.startOffsetHeight=p,a.prevWidth=0,a.prevHeight=0,r=Jr(f),a.startWidth=r[0],a.startHeight=r[1];var h=[Math.max(0,l-a.startWidth),Math.max(0,p-a.startHeight)];if(a.minSize=h,a.maxSize=[1/0,1/0],!s){var d=window.getComputedStyle(f);a.minSize=ge([parseFloat(d.minWidth)||0,parseFloat(d.minHeight)||0],h),a.maxSize=ge([parseFloat(d.maxWidth)||1/0,parseFloat(d.maxHeight)||1/0],h)}var v=t.props.transformOrigin||"% %";a.transformOrigin=v&&T(v)?v.split(" "):v,a.startDirection=si(t,u),a.fixedPosition=ui(t,a.startDirection),a.fixedOriginalPosition=ui(t,u);var g=dn(t,e,{direction:u,set:function(t){var e=t[0],r=t[1];a.startWidth=e,a.startHeight=r},setOrigin:function(t){a.transformOrigin=t},dragStart:So.dragStart(t,(new Hn).dragStart([0,0],n))}),m=vn(t,"onResizeStart",g);return!1!==m&&(a.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:u}),!!a.isResize&&g},dragControl:function(t,e){var r,n=e.datas,i=e.distX,o=e.distY,a=e.parentFlag,s=e.isPinch,u=e.parentDistance,c=e.parentScale,f=e.inputEvent,l=e.parentKeepRatio,p=e.dragClient,h=e.parentDist,d=e.isRequest,v=n.direction,g=n.isResize,m=n.transformOrigin;if(g){var b=n.startWidth,y=n.startHeight,x=n.startOffsetWidth,E=n.startOffsetHeight,S=n.prevWidth,M=n.prevHeight,w=n.minSize,D=n.maxSize,C=t.props,O=C.throttleResize,P=void 0===O?0:O,R=C.parentMoveable,z=v;v[0]||v[1]||(z=[1,1]);var B=t.props.keepRatio||l,_=z[0]||!z[1],G=_?E/x:x/E,T=B||a?v:n.startDirection,A=p,j=0,N=0;if(p||(A=!a&&s?ui(t,[0,0]):B?n.fixedOriginalPosition:n.fixedPosition),h)j=h[0],N=h[1];else if(c)j=(c[0]-1)*x,N=(c[1]-1)*E;else if(s)u&&(j=u,N=u*E/x);else{var I=Un({datas:n,distX:i,distY:o});if(j=z[0]*I[0],N=z[1]*I[1],B&&x&&E){var k=ue([0,0],I),X=ue([0,0],z),Y=ue([0,0],[x,E]),W=Ur([j,N]),q=Math.cos(k-X)*W;z[0]?z[1]?(j=Math.cos(Y)*q,N=Math.sin(Y)*q):(j=q,N=bn(j,_,G)):(N=q,j=yn(N,_,G))}}var H=z[0]||B?Math.max(x+j,xr):x,L=z[1]||B?Math.max(E+N,xr):E;B&&x&&E&&(L=H*E/x);var F=[0,0];if(s||(F=no(t,H,L,v,n.fixedOriginalPosition,d,n)),h&&(!h[0]&&(F[0]=0),!h[1]&&(F[1]=0)),B){z[0]&&z[1]&&F[0]&&F[1]&&(Math.abs(F[0])>Math.abs(F[1])?F[1]=0:F[0]=0);var V=!F[0]&&!F[1];V&&(_?H=cn(H,P):L=cn(L,P)),z[0]&&!z[1]||F[0]&&!F[1]||V&&_?(H+=F[0],L=bn(H,_,G)):(!z[0]&&z[1]||!F[0]&&F[1]||V&&!_)&&(L+=F[1],H=yn(L,_,G))}else H+=F[0],L+=F[1],F[0]||(H=cn(H,P)),F[1]||(L=cn(L,P));r=Bn([H,L],w,D,B),H=r[0],L=r[1],H=Math.round(H),L=Math.round(L),j=H-x,N=L-E;var U=[j-S,N-M];n.prevWidth=j,n.prevHeight=N;var $=ai(t,H,L,T,A,m);if(R||!U.every((function(t){return!t}))||!$.every((function(t){return!t}))){var K=dn(t,e,{width:b+j,height:y+N,offsetWidth:H,offsetHeight:L,direction:v,dist:[j,N],delta:U,isPinch:!!s,drag:So.drag(t,qn(t.state,$,f,!!s,!1))});return vn(t,"onResize",K),K}}},dragControlAfter:function(t,e){var r=e.datas,n=r.isResize,i=r.startOffsetWidth,o=r.startOffsetHeight,a=r.prevWidth,s=r.prevHeight;if(n){var u=t.state,c=u.width,f=u.height,l=c-(i+a),p=f-(o+s),h=Math.abs(l)>3,d=Math.abs(p)>3;return h&&(r.startWidth+=l,r.startOffsetWidth+=l,r.prevWidth+=l),d&&(r.startHeight+=p,r.startOffsetHeight+=p,r.prevHeight+=p),h||d?(this.dragControl(t,e),!0):void 0}},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;if(!r.isResize)return!1;r.isResize=!1;var i=dn(t,e,{isDrag:n});return vn(t,"onResizeEnd",i),n},dragGroupControlCondition:ci,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var i=n.direction,o=ui(t,i),a=Fn(t,this,"dragControlStart",r,(function(r,n){var a=ui(r,i),s=be(Se(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),u=s[0],c=s[1];return n.originalX=u,n.originalY=c,e})),s=pr({},n,{targets:t.props.targets,events:a}),u=vn(t,"onResizeGroupStart",s);return r.isResize=!1!==u,!!r.isResize&&n},dragGroupControl:function(t,e){var r=e.datas;if(r.isResize){var n=this.dragControl(t,e);if(n){var i=n.offsetWidth,o=n.offsetHeight,a=n.dist,s=t.props.keepRatio,u=[i/(i-a[0]),o/(o-a[1])],c=ui(t,r.direction),f=Fn(t,this,"dragControl",r,(function(r,n){var i=be(Se(t.rotation/180*Math.PI,3),[n.originalX*u[0],n.originalY*u[1],1],3),o=i[0],a=i[1];return pr({},e,{parentDist:null,parentScale:u,dragClient:ge(c,[o,a]),parentKeepRatio:s})})),l=pr({targets:t.props.targets,events:f},n);return vn(t,"onResizeGroup",l),l}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isResize){this.dragControlEnd(t,e),Fn(t,this,"dragControlEnd",n,e);var i=dn(t,e,{targets:t.props.targets,isDrag:r});return vn(t,"onResizeGroupEnd",i),r}},request:function(t){var e={},r=0,n=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?r=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(r+=t.deltaWidth),"offsetHeight"in t?n=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(n+=t.deltaHeight),{datas:e,parentDist:[r,n]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},To={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},render:function(t,e){var r=t.props,n=r.resizable,i=r.scalable,o=r.edge;if(!n&&i)return o?_o(t,e):Bo(t,e)},dragControlCondition:ci,dragControlStart:function(t,e){var r=e.datas,n=e.isPinch,i=e.inputEvent,o=e.parentDirection,a=o||(n?[0,0]:on(i.target)),s=t.state,u=s.width,c=s.height,f=s.targetTransform,l=s.target;if(!a||!l)return!1;n||Vn(t,{datas:r}),r.datas={},r.transform=f,r.prevDist=[1,1],r.direction=a,r.width=u,r.height=c,r.startScale=[1,1],r.fixedPosition=ui(t,a);var p=dn(t,e,{direction:a,set:function(t){r.startScale=t},dragStart:So.dragStart(t,(new Hn).dragStart([0,0],i))}),h=vn(t,"onScaleStart",p);return!1!==h&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:a}),!!r.isScale&&p},dragControl:function(t,e){var r=e.datas,n=e.distX,i=e.distY,o=e.parentScale,a=e.parentDistance,s=e.parentKeepRatio,u=e.parentFlag,c=e.isPinch,f=e.inputEvent,l=e.dragClient,p=e.parentDist,h=e.isRequest,d=r.prevDist,v=r.direction,g=r.width,m=r.height,b=r.transform,y=r.isScale,x=r.startScale;if(!y)return!1;var E=t.props,S=E.throttleScale,M=E.parentMoveable,w=v;v[0]||v[1]||(w=[1,1]);var D=t.props.keepRatio||s,C=t.state,O=w[0]||!w[1],P=g*x[0],R=m*x[1],z=O?R/P:P/R,B=1,_=1,T=l;if(l||(T=!u&&c?ui(t,[0,0]):r.fixedPosition),p)B=(g+p[0])/g,_=(m+p[1])/m;else if(o)B=o[0],_=o[1];else if(c)a&&(B=(g+a)/g,_=(m+a*m/g)/m);else{var A=Un({datas:r,distX:n,distY:i}),j=w[0]*A[0],N=w[1]*A[1];if(D&&g&&m){var I=ue([0,0],A),k=ue([0,0],w),X=ue([0,0],[P,R]),Y=Ur([j,N]),W=Math.cos(I-k)*Y;w[0]?w[1]?(j=Math.cos(X)*W,N=Math.sin(X)*W):(j=W,N=bn(j,O,z)):(N=W,j=yn(N,O,z))}B=(g+j)/g,_=(m+N)/m}B=w[0]||D?B*x[0]:x[0],_=w[1]||D?_*x[1]:x[1],0===B&&(B=(d[0]>0?1:-1)*Er),0===_&&(_=(d[1]>0?1:-1)*Er);var q=[B/x[0],_/x[1]],H=[B,_];if(!c&&t.props.groupable){var L=C.snapRenderInfo||{},F=L.direction;G(F)&&(F[0]||F[1])&&(C.snapRenderInfo={direction:v,request:e.isRequest})}var V=[0,0];if(c||(V=io(t,q,v,r.fixedPosition,h,r)),D){w[0]&&w[1]&&V[0]&&V[1]&&(Math.abs(V[0])>Math.abs(V[1])?V[1]=0:V[0]=0);var U=!V[0]&&!V[1];if(U&&(O?q[0]=cn(q[0]*x[0],S)/x[0]:q[1]=cn(q[1]*x[1],S)/x[1]),w[0]&&!w[1]||V[0]&&!V[1]||U&&O){q[0]+=V[0];var $=bn(g*q[0]*x[0],O,z);q[1]=$/m/x[1]}else if(!w[0]&&w[1]||!V[0]&&V[1]||U&&!O){q[1]+=V[1];var K=yn(m*q[1]*x[1],O,z);q[0]=K/g/x[0]}}else q[0]+=V[0],q[1]+=V[1],V[0]||(q[0]=cn(q[0]*x[0],S)/x[0]),V[1]||(q[1]=cn(q[1]*x[1],S)/x[1]);0===q[0]&&(q[0]=(d[0]>0?1:-1)*Er),0===q[1]&&(q[1]=(d[1]>0?1:-1)*Er);var Z=[q[0]/d[0],q[1]/d[1]];H=Or(q,x),r.prevDist=q;var J=oi(t,Z,v,T);if(B===d[0]&&_===d[1]&&J.every((function(t){return!t}))&&!M)return!1;var Q=dn(t,e,{scale:H,direction:v,dist:q,delta:Z,transform:b+" scale("+B+", "+_+")",isPinch:!!c,drag:So.drag(t,qn(t.state,J,f,c,!1))});return vn(t,"onScale",Q),Q},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isScale&&(r.isScale=!1,vn(t,"onScaleEnd",dn(t,e,{isDrag:n})),n)},dragGroupControlCondition:ci,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var i=n.direction,o=ui(t,i),a=Fn(t,this,"dragControlStart",r,(function(r,n){var a=ui(r,i),s=be(Se(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),u=s[0],c=s[1];return n.originalX=u,n.originalY=c,e})),s=pr({},n,{targets:t.props.targets,events:a}),u=vn(t,"onScaleGroupStart",s);return r.isScale=!1!==u,!!r.isScale&&s},dragGroupControl:function(t,e){var r=e.datas;if(r.isScale){var n=this.dragControl(t,e);if(n){var i=t.props.keepRatio,o=n.scale,a=ui(t,r.direction),s=Fn(t,this,"dragControl",r,(function(r,n){var s=be(Se(t.rotation/180*Math.PI,3),[n.originalX*o[0],n.originalY*o[1],1],3),u=s[0],c=s[1];return pr({},e,{parentDist:null,parentScale:o,parentKeepRatio:i,dragClient:ge(a,[u,c])})})),u=pr({targets:t.props.targets,events:s},n);return vn(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isScale){this.dragControlEnd(t,e),Fn(t,this,"dragControlEnd",n,e);var i=dn(t,e,{targets:t.props.targets,isDrag:r});return vn(t,"onScaleGroupEnd",i),r}},request:function(){var t={},e=0,r=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(n){return e+=n.deltaWidth,r+=n.deltaHeight,{datas:t,parentDist:[e,r]}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Ao(t,e){return t.map((function(t,r){return z(t,e[r],1,2)}))}function jo(t,e,r){var n=ue(t,e),i=ue(t,r),o=i-n;return o>=0?o:o+2*Math.PI}function No(t,e){var r=jo(t[0],t[1],t[2]),n=jo(e[0],e[1],e[2]),i=Math.PI;return!(r>=i&&n<=i||r<=i&&n>=i)}var Io={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},render:function(t,e){var r=t.props,n=r.resizable,i=r.scalable,o=r.warpable;if(!n&&!i&&o){var a=t.state,s=a.pos1,u=a.pos2,c=a.pos3,f=a.pos4,l=Ao(s,u),p=Ao(u,s),h=Ao(s,c),d=Ao(c,s),v=Ao(c,f),g=Ao(f,c),m=Ao(u,f),b=Ao(f,u);return[e.createElement("div",{className:Pr("line"),key:"middeLine1",style:Kr(l,v)}),e.createElement("div",{className:Pr("line"),key:"middeLine2",style:Kr(p,g)}),e.createElement("div",{className:Pr("line"),key:"middeLine3",style:Kr(h,m)}),e.createElement("div",{className:Pr("line"),key:"middeLine4",style:Kr(d,b)})].concat(Bo(t,e))}},dragControlCondition:function(t){return!t.isRequest&&F(t.inputEvent.target,Pr("direction"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,i=t.props.target,o=n.target,a=on(o);if(!a||!i)return!1;var s=t.state,u=s.transformOrigin,c=s.is3d,f=s.targetTransform,l=s.targetMatrix,p=s.width,h=s.height,d=s.left,v=s.top;r.datas={},r.targetTransform=f,r.warpTargetMatrix=c?l:le(l,3,4),r.targetInverseMatrix=oe(ae(r.warpTargetMatrix,4),3,4),r.direction=a,r.left=d,r.top=v,Vn(t,{datas:r}),r.poses=[[0,0],[p,0],[0,h],[p,h]].map((function(t){return me(t,u)})),r.nextPoses=r.poses.map((function(t){var e=t[0],n=t[1];return be(r.warpTargetMatrix,[e,n,0,1],4)})),r.startMatrix=Me(4),r.prevMatrix=Me(4),r.absolutePoses=sn(s),r.posIndexes=Zn(a),s.snapRenderInfo={request:e.isRequest,direction:a};var g=dn(t,e,{set:function(t){r.startMatrix=t}}),m=vn(t,"onWarpStart",g);return!1!==m&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var r=e.datas,n=e.isRequest,i=e.distX,o=e.distY,a=r.targetInverseMatrix,s=r.prevMatrix,u=r.isWarp,c=r.startMatrix,f=r.poses,l=r.posIndexes,p=r.absolutePoses;if(!u)return!1;if(Wi(t,"warpable")){var h=l.map((function(t){return p[t]}));h.length>1&&h.push([(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]);var d=Ui(t,n,h.map((function(t){return[t[0]+i,t[1]+o]}))),v=d.horizontal,g=d.vertical;o-=v.offset,i-=g.offset}var m=Un({datas:r,distX:i,distY:o},!0),b=r.nextPoses.slice();if(l.forEach((function(t){b[t]=ge(b[t],m)})),!yr.every((function(t){return No(t.map((function(t){return f[t]})),t.map((function(t){return b[t]})))})))return!1;var y=Ce(f[0],f[1],f[2],f[3],b[0],b[1],b[2],b[3]);if(!y.length)return!1;var x=Ee(he(a,y,4)),E=r.targetTransform+" matrix3d("+x.join(",")+")",S=de(ae(s,4),x,4);return r.prevMatrix=x,vn(t,"onWarp",dn(t,e,{delta:S,matrix:de(c,x,4),multiply:de,dist:x,transform:E})),!0},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isWarp&&(r.isWarp=!1,vn(t,"onWarpEnd",dn(t,e,{isDrag:n})),n)}},ko=Pr("area"),Xo=Pr("area-pieces"),Yo=Pr("area-piece"),Wo=Pr("avoid");function qo(t){var e=t.areaElement,r=t.state,n=r.width,i=r.height;U(e,Wo),e.style.cssText+="left: 0px; top: 0px; width: "+n+"px; height: "+i+"px"}function Ho(t){return t.createElement("div",{key:"area_pieces",className:Xo},t.createElement("div",{className:Yo}),t.createElement("div",{className:Yo}),t.createElement("div",{className:Yo}),t.createElement("div",{className:Yo}))}var Lo={name:"dragArea",props:{dragArea:Boolean},render:function(t,e){var r=t.props,n=r.target,i=r.dragArea,o=r.groupable,a=t.state,s=a.width,u=a.height,c=a.renderPoses;if(o)return[e.createElement("div",{key:"area",ref:h(t,"areaElement"),className:ko}),Ho(e)];if(!n||!i)return[];var f=Ce([0,0],[s,0],[0,u],[s,u],c[0],c[1],c[2],c[3]),l=f.length?"matrix3d("+Ee(f).join(",")+")":"none";return[e.createElement("div",{key:"area",ref:h(t,"areaElement"),className:ko,style:{top:"0px",left:"0px",width:s+"px",height:u+"px",transformOrigin:"0 0",transform:l}}),Ho(e)]},dragStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,o=e.inputEvent;if(!o)return!1;r.isDragArea=!1,r.inputTarget=o.target;var a=t.areaElement,s=t.state,u=s.moveableClientRect,c=s.renderPoses,f=s.rootMatrix,l=s.is3d,p=u.left,h=u.top,d=Hr(c),v=d.left,g=d.top,m=d.width,b=d.height,y=l?4:3,x=On(f,[n-p,i-h],y),E=x[0],S=x[1];E-=v,S-=g;var M=[{left:v,top:g,width:m,height:S-10},{left:v,top:g,width:E-10,height:b},{left:v,top:g+S+10,width:m,height:b-S-10},{left:v+E+10,top:g,width:m-E-10,height:b}],w=[].slice.call(a.nextElementSibling.children);return M.forEach((function(t,e){w[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"})),V(a,Wo),!0},drag:function(t,e){var r=e.datas,n=e.inputEvent;if(!n)return!1;r.isDragArea||(r.isDragArea=!0,qo(t))},dragEnd:function(t,e){if(!e.inputEvent)return!1;var r=e.inputEvent,n=e.datas,i=n.isDragArea;i||qo(t);var o=t.state.target,a=r.target;if(!i&&!t.isMoveableElement(a)){var s=o.contains(a);vn(t,"onClick",dn(t,e,{isDouble:e.isDouble,inputTarget:a,isTarget:o===a,containsTarget:s}))}},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){var r=e.inputEvent,n=e.isDragArea,i=e.datas;if(!r)return!1;n||qo(t);var o=i.inputTarget,a=r.target;if(!n&&!t.isMoveableElement(a)&&o!==a){var s=t.props.targets,u=s.indexOf(a),c=u>-1,f=!1;-1===u&&(u=H(s,(function(t){return t.contains(a)})),f=u>-1),vn(t,"onClickGroup",dn(t,e,{isDouble:e.isDouble,targets:s,inputTarget:a,targetIndex:u,isTarget:c,containsTarget:f}))}}},Fo={name:"origin",props:{origin:Boolean},render:function(t,e){if(!t.props.origin)return null;var r=t.state,n=r.beforeOrigin,i=r.rotation;return[e.createElement("div",{className:Pr("control","origin"),style:Zr(i,n),key:"beforeOrigin"})]}};function Vo(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Uo={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number},dragStart:function(t,e){var r=t.props,n=r.scrollContainer,i=void 0===n?t.getContainer():n,o=new ir;e.datas.dragScroll=o;var a=e.isControl?"controlDragger":"targetDragger",s=e.targets;o.on("scroll",(function(r){var n=r.container,i=r.direction,o=dn(t,e,{scrollContainer:n,direction:i}),a=s?"onScrollGroup":"onScroll";s&&(o.targets=s),vn(t,a,o)})).on("move",(function(r){var n=r.offsetX,i=r.offsetY;t[a].scrollBy(n,i,e.inputEvent,!1)})),o.dragStart(e,{container:i})},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var n=t.props,i=n.scrollContainer,o=void 0===i?t.getContainer():i,a=n.scrollThreshold,s=void 0===a?0:a,u=n.getScrollPosition,c=void 0===u?Vo:u;return r.drag(e,{container:o,threshold:s,getScrollPosition:function(t){return c({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,pr({},e,{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,pr({},e,{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,pr({},e,{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,pr({},e,{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,pr({},e,{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,pr({},e,{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,pr({},e,{targets:t.props.targets}))}},$o={name:"",props:{target:Object,container:Object,dragArea:Boolean,origin:Boolean,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number}},Ko={name:"padding",props:{padding:Object},render:function(t,e){var r=t.props;if(r.dragArea)return[];var n=r.padding||{},i=n.left,o=void 0===i?0:i,a=n.top,s=void 0===a?0:a,u=n.right,c=void 0===u?0:u,f=n.bottom,l=void 0===f?0:f,p=t.state,h=p.renderPoses,d=p.pos1,v=p.pos2,g=p.pos3,m=p.pos4,b=[d,v,g,m],y=[];return o>0&&y.push([0,2]),s>0&&y.push([0,1]),c>0&&y.push([1,3]),l>0&&y.push([2,3]),y.map((function(t,r){var n=t[0],i=t[1],o=b[n],a=b[i],s=h[n],u=h[i],c=Ce([0,0],[100,0],[0,100],[100,100],o,a,s,u);if(c.length)return e.createElement("div",{key:"padding"+r,className:Pr("padding"),style:{transform:"matrix3d("+Ee(c).join(",")+")"}})}))}},Zo=[$o,Eo,Wn,So,Ro,Go,To,Io,Uo,Lo,Ko,Fo],Jo={name:"groupable",props:{defaultGroupRotate:Number,groupable:Boolean},render:function(t,e){var r=t.props.targets||[];t.moveables=[];var n=t.state,i=n.left,o=n.top,a={left:i,top:o};return r.map((function(r,n){return e.createElement(Xn,{key:"moveable"+n,ref:d(t,"moveables",n),target:r,origin:!1,parentMoveable:t,parentPosition:a})}))}};function Qo(t,e){return Math.max.apply(Math,t.map((function(t){var r=t[0],n=t[1],i=t[2],o=t[3];return Math.max(r[e],n[e],i[e],o[e])})))}function ta(t,e){return Math.min.apply(Math,t.map((function(t){var r=t[0],n=t[1],i=t[2],o=t[3];return Math.min(r[e],n[e],i[e],o[e])})))}function ea(t,e){if(!t.length)return[0,0,0,0];var r=t.map((function(t){var e=t.state;return sn(e)})),n=Sr,i=Sr,o=0,a=0,s=cn(e,xr);if(s%90){var u=e/180*Math.PI,c=Math.tan(u),f=-1/c,l=[Mr,Sr],p=[Mr,Sr];r.forEach((function(t){t.forEach((function(t){var e=t[1]-c*t[0],r=t[1]-f*t[0];l[0]=Math.max(l[0],e),l[1]=Math.min(l[1],e),p[0]=Math.max(p[0],r),p[1]=Math.min(p[1],r)}))})),l.forEach((function(t){p.forEach((function(e){var r=(e-t)/(c-f),o=c*r+t;n=Math.min(n,r),i=Math.min(i,o)}))}));var h=r.map((function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return[ye(e,-u),ye(r,-u),ye(n,-u),ye(i,-u)]}));o=Qo(h,0)-ta(h,0),a=Qo(h,1)-ta(h,1)}else if(n=ta(r,0),i=ta(r,1),o=Qo(r,0)-n,a=Qo(r,1)-i,s%180){var d=o;o=a,a=d}return[n,i,o,a]}var ra=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new cr,e.moveables=[],e.rotation=0,e}lr(e,t);var r=e.prototype;return r.updateEvent=function(t){var e=this.state,r=this.props;e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetDragger=jn(this,e.target,"Group"),this.controlDragger=Nn(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var n=!xn(t.container,r.container);n&&(e.container=r.container);var i=this.differ.update(r.targets),o=i.added,a=i.changed,s=i.removed;(n||o.length||a.length||s.length)&&this.updateRect()},r.checkUpdate=function(){this.updateAbles()},r.updateRect=function(t,e,r){var n;if(void 0===r&&(r=!0),this.controlBox){this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var i=this.state,o=this.props,a=i.target||o.target;(!e||""!==t&&o.updateGroup)&&(this.rotation=o.defaultGroupRotate);var s=this.rotation,u=ea(this.moveables,s),c=u[0],f=u[1],l=u[2],p=u[3];a.style.cssText+="left:0px;top:0px;width:"+l+"px; height:"+p+"px;transform:rotate("+s+"deg)",i.width=l,i.height=p;var h=this.getContainer(),d=en(this.controlBox.getElement(),a,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||h,i),v=[d.left,d.top];n=sn(d),d.pos1=n[0],d.pos2=n[1],d.pos3=n[2],d.pos4=n[3],d.origin=ge(v,d.origin),d.beforeOrigin=ge(v,d.beforeOrigin);var g=d.targetClientRect;g.top+=f-d.top-i.top,g.left+=c-d.left-i.left,this.updateState(pr({},d,{left:c-d.left,top:f-d.top}),r)}},r.triggerEvent=function(e,r){if(e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,r)},r.updateAbles=function(){t.prototype.updateAbles.call(this,this.props.ables.concat([Jo]),"Group")},e.defaultProps=pr({},Xn.defaultProps,{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0}),e}(Xn),na=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}lr(e,t);var r=e.prototype;return r.render=function(){var t=this.props,e=t.ables||[],r=this.props.target||this.props.targets,n=G(r),i=n&&r.length>1;if(i){var o=pr({},this.props,{target:null,targets:r,ables:Zo.concat([Jo],e)});return ft(ra,pr({key:"group",ref:h(this,"moveable")},o))}var a=n?r[0]:r;return ft(Xn,pr({key:"single",ref:h(this,"moveable")},pr({},this.props,{target:a,ables:Zo.concat(e)})))},r.isMoveableElement=function(t){return this.moveable.isMoveableElement(t)},r.dragStart=function(t){this.moveable.dragStart(t)},r.isInside=function(t,e){return this.moveable.isInside(t,e)},r.hitTest=function(t){return this.moveable.hitTest(t)},r.updateRect=function(){this.moveable.updateRect()},r.updateTarget=function(){this.moveable.updateTarget()},r.isDragging=function(){return this.moveable.isDragging()},r.getRect=function(){return this.moveable.getRect()},r.request=function(t,e){return this.moveable.request(t,e)},r.destroy=function(){this.moveable.componentWillUnmount()},e}(wt),ia=na,oa=function(t,e){return oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},oa(t,e)};function aa(t,e){function r(){this.constructor=t}oa(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var sa=function(){return sa=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},sa.apply(this,arguments)};function ua(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a}var ca=function(t){function e(e){var r=t.call(this,e)||this;return r.state={},r.state=r.props,r}aa(e,t);var r=e.prototype;return r.render=function(){return _t(ft(ia,sa({ref:h(this,"moveable")},this.state)),this.state.parentElement)},e}(Mt),fa=["draggable","resizable","scalable","rotatable","warpable","pinchable","snappable","origin","target","edge","throttleDrag","throttleDragRotate","throttleResize","throttleScale","throttleRotate","keepRatio","dragArea","pinchThreshold","snapCenter","snapThreshold","horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","className","renderDirections","scrollable","getScrollPosition","scrollContainer","scrollThreshold","baseDirection","snapElement","snapVertical","snapHorizontal","snapGap","isDisplaySnapDigit","snapDigit","zoom","triggerAblesSimultaneously","padding","snapDistFormat","dragTarget"],la=["dragStart","drag","dragEnd","resizeStart","resize","resizeEnd","scaleStart","scale","scaleEnd","rotateStart","rotate","rotateEnd","warpStart","warp","warpEnd","pinchStart","pinch","pinchEnd","dragGroupStart","dragGroup","dragGroupEnd","resizeGroupStart","resizeGroup","resizeGroupEnd","scaleGroupStart","scaleGroup","scaleGroupEnd","rotateGroupStart","rotateGroup","rotateGroupEnd","pinchGroupStart","pinchGroup","pinchGroupEnd","click","clickGroup","scroll","scrollGroup","renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd","snap"],pa=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging"],ha=function(t){function e(e,r){void 0===r&&(r={});var n=t.call(this)||this;n.tempElement=document.createElement("div");var i=sa({container:e},r),o={};la.forEach((function(t){o[Y("on "+t)]=function(e){return n.trigger(t,e)}})),Bt(ft(ca,sa({ref:h(n,"innerMoveable"),parentElement:e},i,o)),n.tempElement);var a=i.target;return G(a)&&a.length>1&&n.updateRect(),n}aa(e,t);var r=e.prototype;return r.setState=function(t,e){this.innerMoveable.setState(t,e)},r.destroy=function(){Bt(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},e=ua([v(pa,(function(t,e){t[e]||(t[e]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this.getMoveable();if(n&&n[e])return n[e].apply(n,t)})})),v(fa,(function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var r;this.setState((r={},r[e]=t,r))},enumerable:!0,configurable:!0})}))],e),e}(f),da=ha;function va(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ga(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?va(Object(r),!0).forEach((function(e){ma(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):va(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ma(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ba=function(t,e){return{handler:function(e){var r=this.moveable[t];r!==e&&(this.moveable[t]=e)},deep:e}},ya=function(){return fa.reduce((function(t,e){return t[e]=ba(e,!0),t}),{})},xa={};pa.forEach((function(t){xa[t]=function(){var e;return(e=this.moveable)[t].apply(e,arguments)}}));var Ea={name:"Moveable",inheritAttrs:!1,props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,snapThreshold:Number,snapDigit:Number,isDisplaySnapDigit:Boolean,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,defaultGroupRotate:Number,scrollable:Boolean,scrollContainer:[HTMLElement,SVGElement],scrollThreshold:Number,getScrollPosition:Function,warpable:Boolean,renderDirections:Array,rotatable:Boolean,rotationPosition:String,throttleRotate:Number,pinchable:[Boolean,Array],scalable:Boolean,throttleScale:Number,keepRatio:Boolean,resizable:Boolean,throttleResize:Number,baseDirection:Array,draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,dragTarget:[HTMLElement,SVGElement],container:{type:[HTMLElement,SVGElement],default:function(){return document.body}},rootContainer:HTMLElement,dragArea:Boolean,origin:Boolean,zoom:Number,transformOrigin:[Array,String],edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,padding:Object},methods:xa,mounted:function(){var t=this;this.moveable=new da(this.$props.container,ga(ga({},this.$props),{},{target:this.$el})),la.forEach((function(e){var r=e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();t.moveable.on(e,t.$emit.bind(t,r)),t.moveable.on(e,t.$emit.bind(t,e))})),window.addEventListener("resize",this.updateRect,{passive:!0})},watch:ga({},ya()),beforeDestroy:function(){window.removeEventListener("resize",this.updateRect),this.moveable.destroy()}},Sa=Ea;function Ma(t,e,r,n,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=r,c._compiled=!0),n&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var f=c.render;c.render=function(t,e){return u.call(e),f(t,e)}}else{var l=c.beforeCreate;c.beforeCreate=l?[].concat(l,u):[u]}return{exports:t,options:c}}var wa=Ma(Sa,a,s,!1,null,null,null),Da=wa.exports;e["default"]=Da}})["default"]}));
//# sourceMappingURL=VueMoveable.umd.min.js.map