{"remainingRequest":"/home/sjd/Desktop/vue-command/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sjd/Desktop/vue-command/src/components/Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sjd/Desktop/vue-command/src/components/Search.vue","mtime":1599002627909},{"path":"/home/sjd/Desktop/vue-command/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sjd/Desktop/vue-command/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/sjd/Desktop/vue-command/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sjd/Desktop/vue-command/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBpbmplY3Q6IFsic2V0U3RkaW4iXSwKCiAgcHJvcHM6IHsKICAgIGV4ZWN1dGVkOiB7CiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICB0eXBlOiBTZXQsCiAgICB9LAoKICAgIC8vIEluZGljYXRlcyBpZiBzZWFyY2ggaXMgdmlzaWJsZQogICAgaXNTZWFyY2g6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICB9LAoKICAgIC8vIEN1cnJlbnQgU3RkaW4KICAgIHN0ZGluOiB7CiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICB0eXBlOiBTdHJpbmcsCiAgICB9LAogIH0sCgogIGRhdGE6ICgpID0+ICh7CiAgICAvLyBTdWdnZXN0ZWQgY29tbWFuZAogICAgY29tbWFuZDogIiIsCiAgICAvLyBVc2VycyBpbnB1dAogICAgc2VhcmNoOiAiIiwKICB9KSwKCiAgd2F0Y2g6IHsKICAgIHNlYXJjaCgpIHsKICAgICAgLy8gU2VhcmNoIGluIGV4ZWN1dGVkIGNvbW1hbmRzCiAgICAgIHRoaXMuZXhlY3V0ZWQuZm9yRWFjaCgoZXhlY3V0ZWQpID0+IHsKICAgICAgICBpZiAoZXhlY3V0ZWQuc3RhcnRzV2l0aCh0aGlzLnNlYXJjaCkpIHsKICAgICAgICAgIHRoaXMuY29tbWFuZCA9IGV4ZWN1dGVkOwogICAgICAgICAgLy8gU2V0IHRoZSBuZXcgU3RkaW4KICAgICAgICAgIHRoaXMuc2V0U3RkaW4oZXhlY3V0ZWQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmNvbW1hbmQgPSB0aGlzLnN0ZGluOwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICAvLyBGb3JjZSBhdXRvZm9jdXMKICAgIHRoaXMuZm9jdXMoKTsKCiAgICAvLyBSZXNpemUgaW5wdXQgYWJvdXQgY2hhcmFjdGVycwogICAgZnVuY3Rpb24gcmVzaXplKCkgewogICAgICB0aGlzLnN0eWxlLndpZHRoID0gYCR7dGhpcy52YWx1ZS5sZW5ndGh9Y2hgOwogICAgfQogICAgY29uc3QgaW5wdXQgPSB0aGlzLiRyZWZzLmlucHV0OwogICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCByZXNpemUpOwoKICAgIHJlc2l6ZS5jYWxsKGlucHV0KTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBoYW5kbGUoKSB7CiAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZTppc1NlYXJjaCIsIGZhbHNlKTsKICAgICAgLy8gUmVxdWVzdCB0byBoYW5kbGUgdGhlIGN1cnJlbnQgc2VhcmNoCiAgICAgIHRoaXMuJGVtaXQoImhhbmRsZSIsIHRoaXMuY29tbWFuZCk7CiAgICB9LAoKICAgIGZvY3VzKCkgewogICAgICB0aGlzLiRyZWZzLmlucHV0LmZvY3VzKCk7CiAgICB9LAoKICAgIHNldElzU2VhcmNoKGlzU2VhcmNoKSB7CiAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZTppc1NlYXJjaCIsIGlzU2VhcmNoKTsKICAgIH0sCgogICAgLy8gVGVybWluYXRlIHNlYXJjaCBhZnRlciBjYW5jZWxsYXRpb24KICAgIHNpZ2ludCgpIHsKICAgICAgdGhpcy5zZXRTdGRpbigiIik7CiAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZTppc1NlYXJjaCIsIGZhbHNlKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div\n    ref=\"term-cont\"\n    class=\"term-cont term-cont-fullscreen\"\n    @keydown.tab.exact.prevent=\"setIsSearch(false)\"\n    @keydown.esc.exact.prevent=\"setIsSearch(false)\"\n    @keydown.ctrl.67.exact.prevent=\"sigint\"\n  >\n    <div class=\"term-search-container\">\n      <span class=\"term-search\">\n        (reverse-i-search)`\n        <input\n          ref=\"input\"\n          v-model=\"search\"\n          autofocus\n          type=\"text\"\n          autocorrect=\"off\"\n          autocapitalize=\"none\"\n          @keyup.enter.exact=\"handle\"\n        />\n        ': {{ command }}\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  inject: [\"setStdin\"],\n\n  props: {\n    executed: {\n      required: true,\n      type: Set,\n    },\n\n    // Indicates if search is visible\n    isSearch: {\n      required: true,\n      type: Boolean,\n    },\n\n    // Current Stdin\n    stdin: {\n      required: true,\n      type: String,\n    },\n  },\n\n  data: () => ({\n    // Suggested command\n    command: \"\",\n    // Users input\n    search: \"\",\n  }),\n\n  watch: {\n    search() {\n      // Search in executed commands\n      this.executed.forEach((executed) => {\n        if (executed.startsWith(this.search)) {\n          this.command = executed;\n          // Set the new Stdin\n          this.setStdin(executed);\n        }\n      });\n    },\n  },\n\n  created() {\n    this.command = this.stdin;\n  },\n\n  mounted() {\n    // Force autofocus\n    this.focus();\n\n    // Resize input about characters\n    function resize() {\n      this.style.width = `${this.value.length}ch`;\n    }\n    const input = this.$refs.input;\n    input.addEventListener(\"input\", resize);\n\n    resize.call(input);\n  },\n\n  methods: {\n    handle() {\n      this.$emit(\"update:isSearch\", false);\n      // Request to handle the current search\n      this.$emit(\"handle\", this.command);\n    },\n\n    focus() {\n      this.$refs.input.focus();\n    },\n\n    setIsSearch(isSearch) {\n      this.$emit(\"update:isSearch\", isSearch);\n    },\n\n    // Terminate search after cancellation\n    sigint() {\n      this.setStdin(\"\");\n      this.$emit(\"update:isSearch\", false);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../scss/mixins\";\n\n.vue-command {\n  .term-search-container {\n    display: flex;\n  }\n\n  input,\n  textarea {\n    background: none;\n    border: none;\n    font-family: \"Inconsolata\", monospace;\n    font-size: 1rem;\n    outline: none;\n    flex: 1;\n    width: 100%;\n\n    &::placeholder {\n      color: rgba(255, 255, 255, 0.5);\n    }\n  }\n\n  .term-search {\n    flex: 1;\n    background: none;\n    margin: 0;\n    border: 0;\n    color: inherit;\n    font-family: inherit;\n    font-size: 1rem;\n  }\n\n  .term-ps {\n    margin-right: 0.5rem;\n    color: #71ad38;\n    font-size: 20px;\n  }\n}\n</style>\n"]}]}