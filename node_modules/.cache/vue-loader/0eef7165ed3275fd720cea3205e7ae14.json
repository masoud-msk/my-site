{"remainingRequest":"/home/sjd/Desktop/my-site/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sjd/Desktop/my-site/src/components/Stdin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sjd/Desktop/my-site/src/components/Stdin.vue","mtime":1599003308149},{"path":"/home/sjd/Desktop/my-site/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/sjd/Desktop/my-site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sjd/Desktop/my-site/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBpbmplY3Q6IFsnc2V0Q3Vyc29yJywgJ3NldFN0ZGluJ10sCgogIHByb3BzOiB7CiAgICBidXM6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6IE9iamVjdAogICAgfSwKCiAgICBjdXJzb3I6IHsKICAgICAgZGVmYXVsdDogMCwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6IE51bWJlcgogICAgfSwKCiAgICBoZWxwVGV4dDogewogICAgICBkZWZhdWx0OiAnJywKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAoKICAgIGhlbHBUaW1lb3V0OiB7CiAgICAgIGRlZmF1bHQ6IDAsCiAgICAgIHR5cGU6IE51bWJlcgogICAgfSwKCiAgICBoaWRlUHJvbXB0OiB7CiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICB0eXBlOiBCb29sZWFuCiAgICB9LAoKICAgIGlzSW5Qcm9ncmVzczogewogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6IEJvb2xlYW4KICAgIH0sCgogICAgaXNMYXN0OiB7CiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgdHlwZTogQm9vbGVhbgogICAgfSwKCiAgICBpc0Z1bGxzY3JlZW46IHsKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICB0eXBlOiBCb29sZWFuCiAgICB9LAoKICAgIHByb21wdDogewogICAgICBkZWZhdWx0OiAnJywKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAoKICAgIHNob3dIZWxwOiB7CiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICB0eXBlOiBCb29sZWFuCiAgICB9LAoKICAgIHN0ZGluOiB7CiAgICAgIGRlZmF1bHQ6ICcnLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAoKICAgIHVpZDogewogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgdHlwZTogTnVtYmVyCiAgICB9CiAgfSwKCiAgZGF0YTogKCkgPT4gKHsKICAgIHBsYWNlaG9sZGVyOiAnJywKICAgIGxvY2FsOiB7CiAgICAgIC8vIFRoaXMgbWFrZXMgaXQgcG9zc2libGUgdG8gY2hhbmdlIHRoZSBwcm9tcHQgZHVyaW5nIHJ1bnRpbWUKICAgICAgcHJvbXB0OiAnJywKICAgICAgc3RkaW46ICcnCiAgICB9CiAgfSksCgogIHdhdGNoOiB7CiAgICBjdXJzb3IgKCkgewogICAgICBpZiAodGhpcy5pc0xhc3QpIHsKICAgICAgICAvLyBNaXJyb3IgdGhlIGN1cnNvciBwb3NpdGlvbiB0byB0aGUgcmVhbCBjdXJzb3IgcG9zaXRpb24KICAgICAgICB0aGlzLiRyZWZzLmlucHV0LnNldFNlbGVjdGlvblJhbmdlKHRoaXMuY3Vyc29yLCB0aGlzLmN1cnNvcikKICAgICAgfQogICAgfSwKCiAgICBhc3luYyBpc0luUHJvZ3Jlc3MgKCkgewogICAgICBpZiAoIXRoaXMuaXNJblByb2dyZXNzICYmIHRoaXMuaXNMYXN0KSB7CiAgICAgICAgYXdhaXQgdGhpcy4kbmV4dFRpY2soKQoKICAgICAgICB0aGlzLnNjcm9sbEludG9WaWV3KCkKICAgICAgICB0aGlzLmZvY3VzKCkKICAgICAgfQogICAgfSwKCiAgICBpc0xhc3QgKGlzTGFzdCwgd2FzTGFzdCkgewogICAgICBpZiAod2FzTGFzdCAmJiAhaXNMYXN0KSB7CiAgICAgICAgLy8gQWxsb3cgY29tcG9uZW50cyB0byBnZXQgaW50byBmb2N1cwogICAgICAgIHRoaXMuYmx1cigpCiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgc3RkaW4gKCkgewogICAgICAvLyBPbmx5IGxhc3QgU3RkaW4gaXMgYWxsb3dlZCB0byBtdXRhdGUKICAgICAgaWYgKHRoaXMuaXNMYXN0ICYmICF0aGlzLmlzSW5Qcm9ncmVzcykgewogICAgICAgIHRoaXMubG9jYWwuc3RkaW4gPSB0aGlzLnN0ZGluCiAgICAgIH0KCiAgICAgIGF3YWl0IHRoaXMuJG5leHRUaWNrKCkKICAgICAgLy8gU2V0IGN1cnJlbnQgY3Vyc29yIHBvc2l0aW9uCiAgICAgIHRoaXMuc2V0Q3Vyc29yKHRoaXMuJHJlZnMuaW5wdXQuc2VsZWN0aW9uU3RhcnQpCiAgICB9LAoKICAgICdsb2NhbC5zdGRpbicgKCkgewogICAgICAvLyBTZXQgY3VycmVudCBTdGRpbgogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c3RkaW4nLCB0aGlzLmxvY2FsLnN0ZGluKQogICAgICAvLyBTZXQgY3VycmVudCBjdXJzb3IgcG9zaXRpb24KICAgICAgdGhpcy5zZXRDdXJzb3IodGhpcy4kcmVmcy5pbnB1dC5zZWxlY3Rpb25TdGFydCkKICAgIH0KICB9LAoKICBjcmVhdGVkICgpIHsKICAgIHRoaXMubG9jYWwucHJvbXB0ID0gdGhpcy5wcm9tcHQKICAgIHRoaXMubG9jYWwuc3RkaW4gPSB0aGlzLnN0ZGluCiAgfSwKCiAgbW91bnRlZCAoKSB7CiAgICAvLyBTY3JvbGwgdG8gY3VycmVudCBpbnB1dAogICAgdGhpcy5zY3JvbGxJbnRvVmlldygpCiAgICAvLyBGb2N1cyBuZXcgU3RkaW4KICAgIHRoaXMuZm9jdXMoKQoKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICBpZiAodGhpcy5pc0xhc3QgJiYgdGhpcy5zaG93SGVscCkgewogICAgICAgIHRoaXMuc2V0UGxhY2Vob2xkZXIodGhpcy5oZWxwVGV4dCkKICAgICAgfQogICAgfSwgdGhpcy5oZWxwVGltZW91dCkKICB9LAoKICBtZXRob2RzOiB7CiAgICAvLyBIYW5kbGUgY3VycmVudCBjb21tYW5kCiAgICBoYW5kbGUgKCkgewogICAgICAvLyBQZXJzaXN0IHRoZSBjdXJyZW50IHByb21wdAogICAgICB0aGlzLnNldFByb21wdCh0aGlzLnByb21wdCkKICAgICAgLy8gUmVxdWVzdCB0byBoYW5kbGUgdGhlIGN1cnJlbnQgU3RkaW4KICAgICAgdGhpcy4kZW1pdCgnaGFuZGxlJywgdGhpcy5sb2NhbC5zdGRpbikKICAgICAgLy8gSGlkZSB0aGUgY3VycmVudCBwbGFjZWhvbGRlcgogICAgICB0aGlzLnNldFBsYWNlaG9sZGVyKCcnKQogICAgfSwKCiAgICBzZXRQbGFjZWhvbGRlciAocGxhY2Vob2xkZXIpIHsKICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyCiAgICB9LAoKICAgIHNldFByb21wdCAocHJvbXQpIHsKICAgICAgdGhpcy5sb2NhbC5wcm9tcHQgPSBwcm9tdAogICAgfSwKCiAgICBibHVyICgpIHsKICAgICAgdGhpcy4kcmVmcy5pbnB1dC5ibHVyKCkKICAgIH0sCgogICAgZm9jdXMgKCkgewogICAgICB0aGlzLiRyZWZzLmlucHV0LmZvY3VzKCkKICAgIH0sCgogICAgc2Nyb2xsSW50b1ZpZXcgKCkgewogICAgICB0aGlzLiRyZWZzLmlucHV0LnNjcm9sbEludG9WaWV3KCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Stdin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Stdin.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"term-stdin-container\">\n    <slot name=\"prompt\">\n      <span\n        v-if=\"!hidePrompt\"\n        class=\"term-ps\">{{ local.prompt }}</span>\n    </slot>\n\n    <span class=\"term-stdin\">\n      <input\n        ref=\"input\"\n        v-model=\"local.stdin\"\n        :autofocus=\"isLast\"\n        :disabled=\"!isLast || isInProgress\"\n        :placeholder=\"placeholder\"\n        type=\"text\"\n        autocorrect=\"off\"\n        autocapitalize=\"none\"\n        @click=\"setCursor($refs.input.selectionStart)\"\n        @keyup=\"setCursor($refs.input.selectionStart)\"\n        @keyup.enter.exact=\"handle\"/>\n    </span>\n  </div>\n</template>\n\n<script>\nexport default {\n  inject: ['setCursor', 'setStdin'],\n\n  props: {\n    bus: {\n      required: true,\n      type: Object\n    },\n\n    cursor: {\n      default: 0,\n      required: true,\n      type: Number\n    },\n\n    helpText: {\n      default: '',\n      type: String\n    },\n\n    helpTimeout: {\n      default: 0,\n      type: Number\n    },\n\n    hidePrompt: {\n      default: false,\n      type: Boolean\n    },\n\n    isInProgress: {\n      default: false,\n      required: true,\n      type: Boolean\n    },\n\n    isLast: {\n      default: false,\n      required: true,\n      type: Boolean\n    },\n\n    isFullscreen: {\n      default: false,\n      required: true,\n      type: Boolean\n    },\n\n    prompt: {\n      default: '',\n      type: String\n    },\n\n    showHelp: {\n      default: false,\n      type: Boolean\n    },\n\n    stdin: {\n      default: '',\n      required: true,\n      type: String\n    },\n\n    uid: {\n      required: true,\n      type: Number\n    }\n  },\n\n  data: () => ({\n    placeholder: '',\n    local: {\n      // This makes it possible to change the prompt during runtime\n      prompt: '',\n      stdin: ''\n    }\n  }),\n\n  watch: {\n    cursor () {\n      if (this.isLast) {\n        // Mirror the cursor position to the real cursor position\n        this.$refs.input.setSelectionRange(this.cursor, this.cursor)\n      }\n    },\n\n    async isInProgress () {\n      if (!this.isInProgress && this.isLast) {\n        await this.$nextTick()\n\n        this.scrollIntoView()\n        this.focus()\n      }\n    },\n\n    isLast (isLast, wasLast) {\n      if (wasLast && !isLast) {\n        // Allow components to get into focus\n        this.blur()\n      }\n    },\n\n    async stdin () {\n      // Only last Stdin is allowed to mutate\n      if (this.isLast && !this.isInProgress) {\n        this.local.stdin = this.stdin\n      }\n\n      await this.$nextTick()\n      // Set current cursor position\n      this.setCursor(this.$refs.input.selectionStart)\n    },\n\n    'local.stdin' () {\n      // Set current Stdin\n      this.$emit('update:stdin', this.local.stdin)\n      // Set current cursor position\n      this.setCursor(this.$refs.input.selectionStart)\n    }\n  },\n\n  created () {\n    this.local.prompt = this.prompt\n    this.local.stdin = this.stdin\n  },\n\n  mounted () {\n    // Scroll to current input\n    this.scrollIntoView()\n    // Focus new Stdin\n    this.focus()\n\n    setTimeout(() => {\n      if (this.isLast && this.showHelp) {\n        this.setPlaceholder(this.helpText)\n      }\n    }, this.helpTimeout)\n  },\n\n  methods: {\n    // Handle current command\n    handle () {\n      // Persist the current prompt\n      this.setPrompt(this.prompt)\n      // Request to handle the current Stdin\n      this.$emit('handle', this.local.stdin)\n      // Hide the current placeholder\n      this.setPlaceholder('')\n    },\n\n    setPlaceholder (placeholder) {\n      this.placeholder = placeholder\n    },\n\n    setPrompt (promt) {\n      this.local.prompt = promt\n    },\n\n    blur () {\n      this.$refs.input.blur()\n    },\n\n    focus () {\n      this.$refs.input.focus()\n    },\n\n    scrollIntoView () {\n      this.$refs.input.scrollIntoView()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import \"../scss/mixins\";\n\n.vue-command {\n  .term-stdin-container {\n    display: flex;\n  }\n\n  input,\n  textarea {\n    background: none;\n    border: none;\n    font-family: \"Inconsolata\", monospace;\n    color: #65888c;\n    font-size: 20px;\n    outline: none;\n    flex: 1;\n    width: 100%;\n\n    &::placeholder {\n      color: rgba(255, 255, 255, 0.5);\n    }\n  }\n\n  .term-stdin {\n    flex: 1;\n    color: #65888c;\n    font-size: 20px;\n    margin: 0;\n    border: 0;\n    color: inherit;\n    font-family: inherit;\n    font-size: 1rem;\n  }\n}\n</style>\n"]}]}